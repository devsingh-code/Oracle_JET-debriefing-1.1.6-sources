"use strict";define(["knockout","text!./part-preview-component.html"],(e,l)=>{class t{constructor({model:l,catalogCollection:t,onOpenDetails:i,searchRequest:a,showAllFields:s}){this.model=l,this.catalogCollection=t,this.onOpenDetails=i||null,this.searchRequest=a||null,this.showAllFields=!!s,this.catalogName=this.catalogCollection.getByIdOrCreate(this.model.catalogId).name,this.previewFields=e.pureComputed(()=>{if(!this.catalogCollection.has(this.model.catalogId))return[];return this.catalogCollection.getByIdOrCreate(this.model.catalogId).previewFieldSchemas.map(e=>({title:e.name,label:e.label,searchable:e.searchable,value:this.model.fields[e.label]})).filter(e=>void 0!==e.value&&null!==e.value)}),this.detailFields=e.pureComputed(()=>{if(!this.catalogCollection.has(this.model.catalogId))return[];return this.catalogCollection.getByIdOrCreate(this.model.catalogId).nonPreviewFieldSchemas.map(e=>({title:e.name,label:e.label,searchable:e.searchable,value:this.model.fields[e.label]})).filter(e=>void 0!==e.value&&null!==e.value)}),this.previewImage=e.pureComputed(()=>{let e=this.model.images;return e.length>=1?e[0]:null}),this.noImage=e.observable(!0)}imageLoaded(){this.noImage(!1)}openDetails(e,l){this.onOpenDetails instanceof Function&&this.onOpenDetails(this.model),l.stopPropagation()}dispose(){this.previewFields&&this.previewFields.dispose(),this.previewFields=null,this.previewImage&&this.previewImage.dispose(),this.previewImage=null,this.model=null}}let i=t;return e.components.register("part-preview",{viewModel:i,template:l}),t});