"use strict";define(["knockout","utils/dom","ojs/ojarraydataprovider","ojs/ojmutablearraydataprovider","ojs/ojlistview","ojs/ojbutton"],function(t,e,i,n){return function(){return this.mainSectionClass=t.observable(),new class{initializeobservables(){this.warrantyValue=t.observable(),this.isWarrantyDisabled=t.observable(!0),this.inputWarrantyDataProvider=t.observable(new i([],{keyAttributes:"value"})),this.inputBrandDataProvider=t.observable(new i([],{keyAttributes:"value"})),this.inputTypeDataProvider=t.observable(new i([],{keyAttributes:"value"})),this.inputModelDataProvider=t.observable(new i([],{keyAttributes:"value"})),this.inputSucDateValue=t.observable(),this.isSucDateDisabled=t.observable(!1),this.inputDeliveryDateValue=t.observable(),this.isDeliverDateDisabled=t.observable(!1),this.modelValue=t.observable(),this.isModelDisabled=t.observable(!0),this.typeValue=t.observable(),this.isTypeDisabled=t.observable(!0),this.brandValue=t.observable(),this.isBrandDisabled=t.observable(!0),this.serialNumberValue=t.observable(),this.isSerialNumberDisabled=t.observable(!0),this.assetTagNumberValue=t.observable(),this.isAssetNumberDisabled=t.observable(!0)}createId(t,e){var i=[];return i.assetDetailsId="assetMappingBtn_"+t+"_"+e,i.serviceCheckListId="nextButton_"+t+"_"+e,i.prevHistoryId="prevHistoryDiv_"+t+"_"+e,i}listallAssets(e){var n=1;this.allAssetData=[];const s=e.inventoryList;console;for(const[t,i]of Object.entries(s)){var a=null!=e.activity.masterActivityId?e.activity.masterActivityId:"";if("customer"==i.invpool&&i.inv_aid==e.activity.aid||"customer"==i.invpool&&i.inv_aid==a){var r=i.invid,l=i.osc_asset_id,o=(null!=i.inv_capacity&&i.inv_capacity.length>0&&i.inv_capacity,null!=i.model_name&&i.model_name.length>0?i.model_name:""),v=(null!=e.activity.activity_organization&&e.activity.activity_organization.length>0&&e.activity.activity_organization,null!=i.inv_floor&&i.inv_floor.length>0?i.inv_floor:"NA"),c=null!=i.inv_room&&i.inv_room.length>0?i.inv_room:"NA",y=null!=i.inv_block&&i.inv_block.length>0?i.inv_block:"NA",u=null!=i.inv_type&&i.inv_type.length>0?i.inv_type:"",d=(null!=i.inv_visitNumber&&i.inv_visitNumber.length>0&&i.inv_visitNumber,null!=i.inv_number&&i.inv_number.length>0?i.inv_number:"NA"),h=null!=i.invsn&&i.invsn.length>0?i.invsn:"",_=null!=i.issue_type&&i.issue_type.length>0?i.issue_type:"NA",b=null!=i.inv_service_type&&i.inv_service_type.length>0?i.inv_service_type:"NA",p=null!=i.asset_remarks&&i.asset_remarks.length>0?i.asset_remarks:"NA",m=null!=i.warranty&&i.warranty.length>0?i.warranty:"NA";m="yes"==m?"Active":"Expired",1!=i.asset_verified?1!=i.service_checklist_completed&&(this.assetClass="demo-centering-box-red"):1!=i.service_checklist_completed?this.assetClass="demo-centering-box-yellow":this.assetClass="demo-centering-box-green";var g=this.createId(r,l);0==this.allAssetData.length?this.allAssetData=[{model:o,serialNo:h,wStatus:m,block:y,floor:v,room:c,machineNo:d,assetType:u,issueType:_,serviceType:b,remarks:p,count:n,assetMappingButtonId:g.assetDetailsId,serviceCheckListButtonId:g.serviceCheckListButtonId,serviceCheckListHistoryId:g.prevHistoryId}]:this.allAssetData.push({model:o,serialNo:h,wStatus:m,block:y,floor:v,room:c,machineNo:d,assetType:u,issueType:_,serviceType:b,remarks:p,count:n,assetMappingButtonId:g.assetDetailsId,serviceCheckListButtonId:g.serviceCheckListButtonId,serviceCheckListHistoryId:g.prevHistoryId}),n++}}"Preventive Maintenance"!=e.activity.aworktype&&(this.allAssetsDataProvider=t.observable(new i(this.allAssetData,{keyAttributes:"serialNo"})))}assetMapping(t,e,n){var t=t,s=new Date,a=s.getDate(),r=s.getMonth()+1;s.getFullYear(),r<10&&(r="0"+r),a<10&&(a="0"+a),null!=n.activity.activity_organization&&n.activity.activity_organization.length>0&&n.activity.activity_organization,null!=n.activity.project&&n.activity.project.length>0&&n.activity.project,null!=n.activity.caddress&&n.activity.caddress.length>0&&n.activity.caddress,null!=n.activity.reference_number&&n.activity.reference_number.length>0&&n.activity.reference_number,null!=n.activity.caddress&&n.activity.caddress.length>0&&n.activity.caddress;var l=null!=n.inventoryList[t].model_name&&n.inventoryList[t].model_name.length>0?n.inventoryList[t].model_name:"",o=null!=n.inventoryList[t].inv_type&&n.inventoryList[t].inv_type.length>0?n.inventoryList[t].inv_type:"",v=(null!=n.inventoryList[t].inv_block&&n.inventoryList[t].inv_block.length>0&&n.inventoryList[t].inv_block,null!=n.inventoryList[t].inv_floor&&n.inventoryList[t].inv_floor.length>0&&n.inventoryList[t].inv_floor,null!=n.inventoryList[t].inv_number&&n.inventoryList[t].inv_number.length>0&&n.inventoryList[t].inv_number,null!=n.inventoryList[t].invsn&&n.inventoryList[t].invsn.length>0?n.inventoryList[t].invsn:""),c=null!=n.inventoryList[t].brand&&n.inventoryList[t].brand.length>0?n.inventoryList[t].brand:"",y=(null!=n.inventoryList[t].capacity&&n.inventoryList[t].capacity.length>0&&n.inventoryList[t].capacity,null!=n.inventoryList[t].delivery_date&&n.inventoryList[t].delivery_date.length>0?n.inventoryList[t].delivery_date:""),u=null!=n.inventoryList[t].suc_date&&n.inventoryList[t].suc_date.length>0?n.inventoryList[t].suc_date:"",d=(null!=n.inventoryList[t].type&&n.inventoryList[t].type.length>0&&n.inventoryList[t].type,null!=n.inventoryList[t].warranty&&n.inventoryList[t].warranty.length>0?n.inventoryList[t].warranty:""),h=(null!=n.inventoryList[t].issue_type&&n.inventoryList[t].issue_type.length>0&&n.inventoryList[t].issue_type,null!=n.inventoryList[t].inv_service_type&&n.inventoryList[t].inv_service_type.length>0&&n.inventoryList[t].inv_service_type,null!=n.inventoryList[t].asset_remarks&&n.inventoryList[t].asset_remarks.length>0&&n.inventoryList[t].asset_remarks,null!=n.inventoryList[t].warranty_start_date&&n.inventoryList[t].warranty_start_date.length>0&&n.inventoryList[t].warranty_start_date,null!=n.inventoryList[t].warranty_end_date&&n.inventoryList[t].warranty_end_date.length>0&&n.inventoryList[t].warranty_end_date,null!=n.inventoryList[t].inv_warranty_info&&n.inventoryList[t].inv_warranty_info.length>0&&n.inventoryList[t].inv_warranty_info,null!=n.inventoryList[t].inv_number&&n.inventoryList[t].inv_number.length>0?n.inventoryList[t].inv_number:"");this.serialNumberValue(v),this.assetTagNumberValue(h);var _=[],b=[],p=[],m=[];_.push({value:c||"Select Brand",label:c||"Select Brand"}),this.inputBrandDataProvider(new i(_,{keyAttributes:"value"})),b.push({value:o||"Select Type",label:o||"Select Type"}),this.inputTypeDataProvider(new i(b,{keyAttributes:"value"})),p.push({value:l||"Select Model",label:l||"Select Model"}),this.inputModelDataProvider(new i(p,{keyAttributes:"value"})),m.push({value:d||"Select Warranty",label:d||"Select Warranty"}),this.inputWarrantyDataProvider(new i(m,{keyAttributes:"value"})),""!=y&&(this.inputDeliveryDateValue(y),this.isDeliverDateDisabled(!0)),""!=u&&(this.inputSucDateValue(u),this.isSucDateDisabled(!0))}handleActivated(e){this._controller=e.valueAccessor().params.app,this.ofscData=this._controller.openData(),console.log(this.ofscData),this.count=t.observable(),this.listallAssets(this.ofscData),this.assetData=[{account:null!=this.ofscData.activity.activity_organization&&this.ofscData.activity.activity_organization.length>0?this.ofscData.activity.activity_organization:"",site:null!=this.ofscData.activity.caddress&&this.ofscData.activity.caddress.length>0?this.ofscData.activity.caddress:"",refno:null!=this.ofscData.activity.reference_number&&this.ofscData.activity.reference_number.length>0?this.ofscData.activity.reference_number:""}],this.assetDataProvider=t.observable(new i(this.assetData,{keyAttributes:"account"}))}handleAttached(t){console.log("Page is Loaded "),this._controller=t.valueAccessor().params.app,this.initializeobservables(),this.ofscData=this._controller.openData(),console.log(this.ofscData),this._doc=document.getElementById("mainSectionPanel"),this._assetDoc=document.getElementById("assetVerifySectionPanel"),this.assetButtonAction=function(t){this._doc.classList.add("ishidden"),this._assetDoc.classList.remove("ishidden");var e=t.target.id,i=e.split("_"),n=i[1],s=i[2];this.assetMapping(n,s,this.ofscData)}.bind(this)}dismiss(){this._controller.router.go("dashboard",{historyUpdate:"replace"})}}}});