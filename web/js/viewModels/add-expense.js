define(["knockout","utils/dom","ojs/ojarraydataprovider","ojs/ojselectcombobox","ojs/ojinputtext","ojs/ojselectcombobox","ojs/ojinputnumber","ojs/ojvalidationgroup","ojs/ojformlayout"],function(e,t,i){return function(){return new class{handleActivated(t){this._controller=t.valueAccessor().params.app,this.expenseActivityEnumCollection=this._controller.expenseActivityEnumCollection,this.expenseItemEnumCollection=this._controller.expenseItemEnumCollection,this.expenseCurrencyEnumCollection=this._controller.expenseCurrencyEnumCollection,this.activityId=e.observable(""),this.expenseItemId=e.observable(""),this.amount=e.observable(0),this.currencyKey=e.observable(""),this.selectMessagesCustomBillingType=e.observable([]),this.selectMessagesCustomBillingItem=e.observable([]),this.selectMessagesCustomCurrency=e.observable([]),this.dataValidation={detail:"Enter a valid value.",summary:"",severity:"error"},this.activityEnumArray=new i(this.expenseActivityEnumCollection.map(e=>({value:e.get("id"),label:e.get("text")})),{keyAttributes:"value"}),this.activityId(this.activityEnumArray.data[0].value),this.expenseCurrencyEnumArray=new i(this.expenseCurrencyEnumCollection.map(e=>({value:e.get("id"),label:e.get("text")})),{keyAttributes:"value"}),this.currencyKey(this.expenseCurrencyEnumArray.data[0].value),this.expenseItemEnumArray=new i(this.expenseItemEnumCollection.map(e=>({value:e.get("id"),label:e.get("label")})),{keyAttributes:"value"}),this.expenseItemId(this.expenseItemEnumArray.data[0].value),this.expenseItemDescription=e.pureComputed(()=>this.expenseItemId()?this.expenseItemEnumCollection.get(this.expenseItemId()).get("label"):"")}handleAttached(e){}handleBindingsApplied(e){t.resetScrolling()}handleDetached(e){}submit(){const e=this._controller.checkValidationGroup(),t=this._validateBillingType(this.activityId),i=this._validateBillingItem(this.expenseItemId),s=this._validateCurrency(this.currencyKey);e&&!t&&this.selectMessagesCustomBillingType([this.dataValidation]),e&&!i&&this.selectMessagesCustomBillingItem([this.dataValidation]),e&&!s&&this.selectMessagesCustomCurrency([this.dataValidation]),e&&t&&i&&s&&(this._controller.addExpense({activityId:this.activityId(),itemId:this.expenseItemId(),amount:this.amount(),currencyKey:this.currencyKey()}),this._controller.router.go("dashboard",{historyUpdate:"replace"}))}_validateBillingType(){return!!this.activityEnumArray.data.find(e=>e.value===this.activityId())}_validateBillingItem(){return!!this.expenseItemEnumArray.data.find(e=>e.value===this.expenseItemId())}_validateCurrency(){return!!this.expenseCurrencyEnumArray.data.find(e=>e.value===this.currencyKey())}dispose(){this._controller.router.go("dashboard",{historyUpdate:"replace"})}}}});