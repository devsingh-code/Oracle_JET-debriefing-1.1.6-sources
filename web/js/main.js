define('ofsc-connector',["signals"],e=>{const t=1;return class{constructor(){window.addEventListener("message",this.onPostMessage.bind(this),!1),this.debugMessageSentSignal=new e,this.debugMessageReceivedSignal=new e,this.debugIncorrectMessageReceivedSignal=new e,this.messageFromOfscSignal=new e,this._currentCommunicationCallback=null,this._currentCommunicationPromise=null}sendMessage(e){return this._currentCommunicationPromise?Promise.reject(new Error("Communication chanel is busy")):(this._currentCommunicationPromise=new Promise((n,i)=>{let r=document.referrer||document.location.ancestorOrigins&&document.location.ancestorOrigins[0]||"";if(!r)return i("Unable to get referrer");this._currentCommunicationCallback=(e=>(this._currentCommunicationCallback=null,this._currentCommunicationPromise=null,e instanceof Error?i(e):e.method&&"error"===e.method?i(e):n(e))),e.apiVersion=t,parent.postMessage(e,this.constructor._getOrigin(r)),this.debugMessageSentSignal.dispatch(e)}),this._currentCommunicationPromise)}onPostMessage(e){if(e.source===window)return;if(void 0===e.data)return this.debugIncorrectMessageReceivedSignal.dispatch("No data"),!!this._currentCommunicationCallback&&void this._currentCommunicationCallback(new Error("No data"));let t;try{t=JSON.parse(e.data)}catch(t){return this._currentCommunicationCallback?void this._currentCommunicationCallback(new Error("Incorrect JSON")):(this.debugIncorrectMessageReceivedSignal.dispatch("Incorrect JSON",e.data),!1)}this.debugMessageReceivedSignal.dispatch(t),this._currentCommunicationCallback?this._currentCommunicationCallback(t):this.messageFromOfscSignal.dispatch(t)}static generateCallId(){return btoa(String.fromCharCode.apply(null,window.crypto.getRandomValues(new Uint8Array(16))))}static _getOrigin(e){return"string"==typeof e&&""!==e?e.indexOf("://")>-1?(window.location.protocol||"https:")+e.split("/")[2]:(window.location.protocol||"https:")+e.split("/")[0]:""}}});
define('services/inventory-search-service',[],()=>{const r="~";return class{constructor(r,t,e,i){this.inventoryCollection=r,this.attributeDescription=t,this.searchableProperties=e,this.orderByProperty=i,this.normalizedInventoryList=this._normalizeInventoryForSearch(r)}_normalizeInventoryForSearch(t){let e=[],i=this.searchableProperties.reduce((r,t)=>{let e=this.attributeDescription[t];return e?(r.push({label:t,attributeDescription:e}),r):r},[]),o=i.length;return t.each(t=>{if(!t.has(this.orderByProperty))return;let n=[];for(let r=0;r<o;++r){let e=i[r],o=t.get(e.label);if("enum"===e.attributeDescription.type){let r=e.attributeDescription.enum;o=r&&r[o]&&r[o].text||""}null!==o&&void 0!==o&&(o=o.toString().toLowerCase().trim())&&n.push(o)}e.push({inventory:t,searchString:n.join(r),orderByProperty:t.get(this.orderByProperty).toString()})}),e.sort((r,t)=>r.orderByProperty.localeCompare(t.orderByProperty))}_normalizeSearchSubstring(t){if(null===t||void 0===t)return"";let e=t.toString(),i="";for(let t=0,o=e.length;t<o;++t)e[t]!==r&&(i+=e[t]);return i.toLowerCase().trim()}searchBySubstring(r){let t=this._normalizeSearchSubstring(r);return t?this.normalizedInventoryList.filter(r=>r.searchString.indexOf(t)>=0).map(r=>r.inventory):[]}}});
define('models/abstract-model',["knockout"],t=>{let e=1;return class{getId(){return this[this.constructor.KEY_PROPERTY]}static _getArgumentAsObservable(e){return t.isObservable(e)?e:e instanceof Array?t.observableArray(e):t.observable(e)}static generateUniqueId(){let t=(new Date).getTime(),r="";return window.crypto.getRandomValues(new Uint8Array(8)).forEach(t=>{let e=t.toString(16);r+=e.length<2?"0"+e:e}),`${t}-${e++}-${r}`}static definePropertyAsArray(t){t.__isArray=!0}static definePropertyAsObject(t){t.__isObject=!0}static isPropertyArray(t){return t.__isArray}static isPropertyObject(t){return t.__isObject}static get KEY_PROPERTY(){return"id"}}});
define('models/part-model',["knockout","./abstract-model"],(e,t)=>{return class extends t{constructor(e){super(),this._properties={},this._properties.itemId=this.constructor._getArgumentAsObservable(e.itemId||this.constructor.generateUniqueId()),this._properties.catalogId=this.constructor._getArgumentAsObservable(e.catalogId),this._properties.label=this.constructor._getArgumentAsObservable(e.label),this._properties.itemType=this.constructor._getArgumentAsObservable(e.itemType),this._properties.inventoryType=this.constructor._getArgumentAsObservable(e.inventoryType),this._properties.fields=this.constructor._getArgumentAsObservable(e.fields),this._properties.linkedItems=this.constructor._getArgumentAsObservable(e.linkedItems||[]),this._properties.images=this.constructor._getArgumentAsObservable(e.images||[]),this.constructor.definePropertyAsObject(this._properties.fields),this.constructor.definePropertyAsObject(this._properties.linkedItems),this.constructor.definePropertyAsArray(this._properties.images)}static get KEY_PROPERTY(){return"itemId"}get itemId(){return this._properties.itemId()}get catalogId(){return this._properties.catalogId()}get label(){return this._properties.label()}set label(e){this._properties.label(e)}get itemType(){return this._properties.itemType()}set itemType(e){this._properties.itemType(e)}get inventoryType(){return this._properties.inventoryType()}set inventoryType(e){this._properties.inventoryType(e)}get fields(){return this._properties.fields()}set fields(e){this._properties.fields(e)}get linkedItems(){return this._properties.linkedItems()}set linkedItems(e){this._properties.linkedItems(e)}get images(){return this._properties.images()}set images(e){this._properties.images(e)}}});
define('models/catalog-model',["knockout","./abstract-model"],(e,t)=>{return class extends t{static get KEY_PROPERTY(){return"catalogId"}get catalogId(){return this._catalogId()}get name(){return this._name()}set name(e){this._name(e)}get label(){return this._label()}set label(e){this._label(e)}get fieldSchemas(){return this._fieldSchemas()}set fieldSchemas(e){this._fieldSchemas(e)}get previewFieldSchemas(){return this._previewFieldSchemas()}get nonPreviewFieldSchemas(){return this._nonPreviewFieldSchemas()}get searchableFields(){return this._searchableFields()}get typeSchemas(){return this._typeSchemas()}set typeSchemas(e){this._typeSchemas(e)}constructor({catalogId:t,label:s,name:r,fieldSchemas:i,typeSchemas:a}){super(),this._catalogId=this.constructor._getArgumentAsObservable(t),this._name=this.constructor._getArgumentAsObservable(r),this._label=this.constructor._getArgumentAsObservable(s),this._fieldSchemas=this.constructor._getArgumentAsObservable(i),this._typeSchemas=this.constructor._getArgumentAsObservable(a),this._previewFieldSchemas=e.pureComputed(()=>this._fieldSchemas().filter(e=>e.preview)),this._nonPreviewFieldSchemas=e.pureComputed(()=>this._fieldSchemas().filter(e=>!e.preview)),this._searchableFields=e.pureComputed(()=>this._fieldSchemas().filter(e=>e.searchable).reduce((e,t)=>(e[t.label]=t,e),{})),this.constructor.definePropertyAsArray(this._fieldSchemas),this.constructor.definePropertyAsArray(this._previewFieldSchemas),this.constructor.definePropertyAsArray(this._nonPreviewFieldSchemas),this.constructor.definePropertyAsObject(this._searchableFields),this.constructor.definePropertyAsArray(this._typeSchemas)}}});
define('data-services/parts-catalog-data-service',["ofsc-connector","../models/part-model","../models/catalog-model"],(e,t,r)=>{"use strict";return class{constructor(t){if(!(t&&t instanceof e))throw new TypeError("ofscConnector must be an OfscConnector instance");this._connector=t}searchParts(e,r,a=!1){let s={query:e};return r&&(s.limit=r),a&&(s.cacheOnly=!0),new Promise((e,r)=>{this._connector.sendMessage({method:"callProcedure",callId:this._connector.constructor.generateCallId(),procedure:"searchParts",params:s}).then(r=>{let a=r.resultData.items.map(e=>new t(e));e({items:a,isContinueAvailable:r.resultData.isContinueAvailable,searchId:r.resultData.searchId})}).catch(r)})}searchPartsContinue(e){let r={searchId:e};return new Promise((e,a)=>{this._connector.sendMessage({method:"callProcedure",callId:this._connector.constructor.generateCallId(),procedure:"searchPartsContinue",params:r}).then(r=>{e({items:r.resultData.items.map(e=>new t(e)),isContinueAvailable:r.resultData.isContinueAvailable,searchId:r.resultData.searchId})}).catch(a)})}getParts(e,r=!1){let a={items:e};return r&&(a.cacheOnly=!0),new Promise((e,r)=>{this._connector.sendMessage({method:"callProcedure",callId:this._connector.constructor.generateCallId(),procedure:"getParts",params:a}).then(r=>{let a=r.resultData.items.map(e=>new t(e));e(a)}).catch(r)})}getPartsCatalogsStructure(){return new Promise((e,t)=>{this._connector.sendMessage({method:"callProcedure",callId:this._connector.constructor.generateCallId(),procedure:"getPartsCatalogsStructure"}).then(t=>{let a=t.resultData.map(e=>new r(e));e(a)}).catch(t)})}}});
define('models/abstract-collection',["knockout"],t=>{return class{constructor(){this._dictionary={},this.items=t.observableArray([])}getByIdOrCreate(t){if(!this.has(t)){let r=this.constructor.createEmptyModel(t);this.items.push(r),this._dictionary[t]=r}return this._dictionary[t]}add(t){this._dictionary[t.getId()]=t,this.items.push(t)}static createEmptyModel(t){throw new Error("Not implemented")}has(t){return this._dictionary.hasOwnProperty(t)}}});
define('models/catalog-collection',["knockout","./abstract-collection","./catalog-model"],(e,t,r)=>{return class extends t{constructor(){super()}getByIdOrCreate(e){return super.getByIdOrCreate(e)}static createEmptyModel(e){return new r({id:e,name:"",fieldSchemas:[],typeSchemas:[]})}}});
/**
 * @license text 2.0.15 Copyright jQuery Foundation and other contributors.
 * Released under MIT license, http://github.com/requirejs/text/LICENSE
 */
/*jslint regexp: true */
/*global require, XMLHttpRequest, ActiveXObject,
  define, window, process, Packages,
  java, location, Components, FileUtils */

define('text',['module'], function (module) {
    'use strict';

    var text, fs, Cc, Ci, xpcIsWindows,
        progIds = ['Msxml2.XMLHTTP', 'Microsoft.XMLHTTP', 'Msxml2.XMLHTTP.4.0'],
        xmlRegExp = /^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,
        bodyRegExp = /<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,
        hasLocation = typeof location !== 'undefined' && location.href,
        defaultProtocol = hasLocation && location.protocol && location.protocol.replace(/\:/, ''),
        defaultHostName = hasLocation && location.hostname,
        defaultPort = hasLocation && (location.port || undefined),
        buildMap = {},
        masterConfig = (module.config && module.config()) || {};

    function useDefault(value, defaultValue) {
        return value === undefined || value === '' ? defaultValue : value;
    }

    //Allow for default ports for http and https.
    function isSamePort(protocol1, port1, protocol2, port2) {
        if (port1 === port2) {
            return true;
        } else if (protocol1 === protocol2) {
            if (protocol1 === 'http') {
                return useDefault(port1, '80') === useDefault(port2, '80');
            } else if (protocol1 === 'https') {
                return useDefault(port1, '443') === useDefault(port2, '443');
            }
        }
        return false;
    }

    text = {
        version: '2.0.15',

        strip: function (content) {
            //Strips <?xml ...?> declarations so that external SVG and XML
            //documents can be added to a document without worry. Also, if the string
            //is an HTML document, only the part inside the body tag is returned.
            if (content) {
                content = content.replace(xmlRegExp, "");
                var matches = content.match(bodyRegExp);
                if (matches) {
                    content = matches[1];
                }
            } else {
                content = "";
            }
            return content;
        },

        jsEscape: function (content) {
            return content.replace(/(['\\])/g, '\\$1')
                .replace(/[\f]/g, "\\f")
                .replace(/[\b]/g, "\\b")
                .replace(/[\n]/g, "\\n")
                .replace(/[\t]/g, "\\t")
                .replace(/[\r]/g, "\\r")
                .replace(/[\u2028]/g, "\\u2028")
                .replace(/[\u2029]/g, "\\u2029");
        },

        createXhr: masterConfig.createXhr || function () {
            //Would love to dump the ActiveX crap in here. Need IE 6 to die first.
            var xhr, i, progId;
            if (typeof XMLHttpRequest !== "undefined") {
                return new XMLHttpRequest();
            } else if (typeof ActiveXObject !== "undefined") {
                for (i = 0; i < 3; i += 1) {
                    progId = progIds[i];
                    try {
                        xhr = new ActiveXObject(progId);
                    } catch (e) {}

                    if (xhr) {
                        progIds = [progId];  // so faster next time
                        break;
                    }
                }
            }

            return xhr;
        },

        /**
         * Parses a resource name into its component parts. Resource names
         * look like: module/name.ext!strip, where the !strip part is
         * optional.
         * @param {String} name the resource name
         * @returns {Object} with properties "moduleName", "ext" and "strip"
         * where strip is a boolean.
         */
        parseName: function (name) {
            var modName, ext, temp,
                strip = false,
                index = name.lastIndexOf("."),
                isRelative = name.indexOf('./') === 0 ||
                             name.indexOf('../') === 0;

            if (index !== -1 && (!isRelative || index > 1)) {
                modName = name.substring(0, index);
                ext = name.substring(index + 1);
            } else {
                modName = name;
            }

            temp = ext || modName;
            index = temp.indexOf("!");
            if (index !== -1) {
                //Pull off the strip arg.
                strip = temp.substring(index + 1) === "strip";
                temp = temp.substring(0, index);
                if (ext) {
                    ext = temp;
                } else {
                    modName = temp;
                }
            }

            return {
                moduleName: modName,
                ext: ext,
                strip: strip
            };
        },

        xdRegExp: /^((\w+)\:)?\/\/([^\/\\]+)/,

        /**
         * Is an URL on another domain. Only works for browser use, returns
         * false in non-browser environments. Only used to know if an
         * optimized .js version of a text resource should be loaded
         * instead.
         * @param {String} url
         * @returns Boolean
         */
        useXhr: function (url, protocol, hostname, port) {
            var uProtocol, uHostName, uPort,
                match = text.xdRegExp.exec(url);
            if (!match) {
                return true;
            }
            uProtocol = match[2];
            uHostName = match[3];

            uHostName = uHostName.split(':');
            uPort = uHostName[1];
            uHostName = uHostName[0];

            return (!uProtocol || uProtocol === protocol) &&
                   (!uHostName || uHostName.toLowerCase() === hostname.toLowerCase()) &&
                   ((!uPort && !uHostName) || isSamePort(uProtocol, uPort, protocol, port));
        },

        finishLoad: function (name, strip, content, onLoad) {
            content = strip ? text.strip(content) : content;
            if (masterConfig.isBuild) {
                buildMap[name] = content;
            }
            onLoad(content);
        },

        load: function (name, req, onLoad, config) {
            //Name has format: some.module.filext!strip
            //The strip part is optional.
            //if strip is present, then that means only get the string contents
            //inside a body tag in an HTML string. For XML/SVG content it means
            //removing the <?xml ...?> declarations so the content can be inserted
            //into the current doc without problems.

            // Do not bother with the work if a build and text will
            // not be inlined.
            if (config && config.isBuild && !config.inlineText) {
                onLoad();
                return;
            }

            masterConfig.isBuild = config && config.isBuild;

            var parsed = text.parseName(name),
                nonStripName = parsed.moduleName +
                    (parsed.ext ? '.' + parsed.ext : ''),
                url = req.toUrl(nonStripName),
                useXhr = (masterConfig.useXhr) ||
                         text.useXhr;

            // Do not load if it is an empty: url
            if (url.indexOf('empty:') === 0) {
                onLoad();
                return;
            }

            //Load the text. Use XHR if possible and in a browser.
            if (!hasLocation || useXhr(url, defaultProtocol, defaultHostName, defaultPort)) {
                text.get(url, function (content) {
                    text.finishLoad(name, parsed.strip, content, onLoad);
                }, function (err) {
                    if (onLoad.error) {
                        onLoad.error(err);
                    }
                });
            } else {
                //Need to fetch the resource across domains. Assume
                //the resource has been optimized into a JS module. Fetch
                //by the module name + extension, but do not include the
                //!strip part to avoid file system issues.
                req([nonStripName], function (content) {
                    text.finishLoad(parsed.moduleName + '.' + parsed.ext,
                                    parsed.strip, content, onLoad);
                });
            }
        },

        write: function (pluginName, moduleName, write, config) {
            if (buildMap.hasOwnProperty(moduleName)) {
                var content = text.jsEscape(buildMap[moduleName]);
                write.asModule(pluginName + "!" + moduleName,
                               "define(function () { return '" +
                                   content +
                               "';});\n");
            }
        },

        writeFile: function (pluginName, moduleName, req, write, config) {
            var parsed = text.parseName(moduleName),
                extPart = parsed.ext ? '.' + parsed.ext : '',
                nonStripName = parsed.moduleName + extPart,
                //Use a '.js' file name so that it indicates it is a
                //script that can be loaded across domains.
                fileName = req.toUrl(parsed.moduleName + extPart) + '.js';

            //Leverage own load() method to load plugin value, but only
            //write out values that do not have the strip argument,
            //to avoid any potential issues with ! in file names.
            text.load(nonStripName, req, function (value) {
                //Use own write() method to construct full module value.
                //But need to create shell that translates writeFile's
                //write() to the right interface.
                var textWrite = function (contents) {
                    return write(fileName, contents);
                };
                textWrite.asModule = function (moduleName, contents) {
                    return write.asModule(moduleName, fileName, contents);
                };

                text.write(pluginName, nonStripName, textWrite, config);
            }, config);
        }
    };

    if (masterConfig.env === 'node' || (!masterConfig.env &&
            typeof process !== "undefined" &&
            process.versions &&
            !!process.versions.node &&
            !process.versions['node-webkit'] &&
            !process.versions['atom-shell'])) {
        //Using special require.nodeRequire, something added by r.js.
        fs = require.nodeRequire('fs');

        text.get = function (url, callback, errback) {
            try {
                var file = fs.readFileSync(url, 'utf8');
                //Remove BOM (Byte Mark Order) from utf8 files if it is there.
                if (file[0] === '\uFEFF') {
                    file = file.substring(1);
                }
                callback(file);
            } catch (e) {
                if (errback) {
                    errback(e);
                }
            }
        };
    } else if (masterConfig.env === 'xhr' || (!masterConfig.env &&
            text.createXhr())) {
        text.get = function (url, callback, errback, headers) {
            var xhr = text.createXhr(), header;
            xhr.open('GET', url, true);

            //Allow plugins direct access to xhr headers
            if (headers) {
                for (header in headers) {
                    if (headers.hasOwnProperty(header)) {
                        xhr.setRequestHeader(header.toLowerCase(), headers[header]);
                    }
                }
            }

            //Allow overrides specified in config
            if (masterConfig.onXhr) {
                masterConfig.onXhr(xhr, url);
            }

            xhr.onreadystatechange = function (evt) {
                var status, err;
                //Do not explicitly handle errors, those should be
                //visible via console output in the browser.
                if (xhr.readyState === 4) {
                    status = xhr.status || 0;
                    if (status > 399 && status < 600) {
                        //An http 4xx or 5xx error. Signal an error.
                        err = new Error(url + ' HTTP status: ' + status);
                        err.xhr = xhr;
                        if (errback) {
                            errback(err);
                        }
                    } else {
                        callback(xhr.responseText);
                    }

                    if (masterConfig.onXhrComplete) {
                        masterConfig.onXhrComplete(xhr, url);
                    }
                }
            };
            xhr.send(null);
        };
    } else if (masterConfig.env === 'rhino' || (!masterConfig.env &&
            typeof Packages !== 'undefined' && typeof java !== 'undefined')) {
        //Why Java, why is this so awkward?
        text.get = function (url, callback) {
            var stringBuffer, line,
                encoding = "utf-8",
                file = new java.io.File(url),
                lineSeparator = java.lang.System.getProperty("line.separator"),
                input = new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(file), encoding)),
                content = '';
            try {
                stringBuffer = new java.lang.StringBuffer();
                line = input.readLine();

                // Byte Order Mark (BOM) - The Unicode Standard, version 3.0, page 324
                // http://www.unicode.org/faq/utf_bom.html

                // Note that when we use utf-8, the BOM should appear as "EF BB BF", but it doesn't due to this bug in the JDK:
                // http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4508058
                if (line && line.length() && line.charAt(0) === 0xfeff) {
                    // Eat the BOM, since we've already found the encoding on this file,
                    // and we plan to concatenating this buffer with others; the BOM should
                    // only appear at the top of a file.
                    line = line.substring(1);
                }

                if (line !== null) {
                    stringBuffer.append(line);
                }

                while ((line = input.readLine()) !== null) {
                    stringBuffer.append(lineSeparator);
                    stringBuffer.append(line);
                }
                //Make sure we return a JavaScript string and not a Java string.
                content = String(stringBuffer.toString()); //String
            } finally {
                input.close();
            }
            callback(content);
        };
    } else if (masterConfig.env === 'xpconnect' || (!masterConfig.env &&
            typeof Components !== 'undefined' && Components.classes &&
            Components.interfaces)) {
        //Avert your gaze!
        Cc = Components.classes;
        Ci = Components.interfaces;
        Components.utils['import']('resource://gre/modules/FileUtils.jsm');
        xpcIsWindows = ('@mozilla.org/windows-registry-key;1' in Cc);

        text.get = function (url, callback) {
            var inStream, convertStream, fileObj,
                readData = {};

            if (xpcIsWindows) {
                url = url.replace(/\//g, '\\');
            }

            fileObj = new FileUtils.File(url);

            //XPCOM, you so crazy
            try {
                inStream = Cc['@mozilla.org/network/file-input-stream;1']
                           .createInstance(Ci.nsIFileInputStream);
                inStream.init(fileObj, 1, 0, false);

                convertStream = Cc['@mozilla.org/intl/converter-input-stream;1']
                                .createInstance(Ci.nsIConverterInputStream);
                convertStream.init(inStream, "utf-8", inStream.available(),
                Ci.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER);

                convertStream.readString(inStream.available(), readData);
                convertStream.close();
                inStream.close();
                callback(readData.value);
            } catch (e) {
                throw new Error((fileObj && fileObj.path || '') + ': ' + e);
            }
        };
    }
    return text;
});


define('text!required-properties.json',[],function () { return '{\n  "format": 1,\n  "product": "19.5.0",\n  "properties": [\n    {\n      "label": "csign",\n      "create": true,\n      "entity": "activity",\n      "type": "file",\n      "gui": "signature",\n      "duplicate": 0,\n      "line_count": 0,\n      "name": {\n        "lang": "en",\n        "active": 1,\n        "val": "Signature"\n      }\n    },\n    {\n      "label": "labor_service_activity",\n      "create": true,\n      "entity": "inventory",\n      "type": "enum",\n      "gui": "combobox",\n      "duplicate": 0,\n      "line_count": 0,\n      "name": {\n        "lang": "en",\n        "active": 0,\n        "val": "Labor Activity"\n      },\n      "lookups": [\n        {\n          "lang": "en",\n          "active": 1,\n          "val": "Commute",\n          "index": "com"\n        },\n        {\n          "lang": "en",\n          "active": 1,\n          "val": "Diagnose and Repair",\n          "index": "drp"\n        }\n      ]\n    },\n    {\n      "label": "labor_item_number",\n      "create": true,\n      "entity": "inventory",\n      "type": "enum",\n      "gui": "combobox",\n      "duplicate": 0,\n      "line_count": 0,\n      "name": {\n        "lang": "en",\n        "active": 0,\n        "val": "Labor Item"\n      },\n      "lookups": [\n        {\n          "lang": "en",\n          "active": 1,\n          "val": "Travel Time",\n          "index": "trv"\n        },\n        {\n          "lang": "en",\n          "active": 1,\n          "val": "FS Regular Labor",\n          "index": "reg"\n        },\n        {\n          "lang": "en",\n          "active": 1,\n          "val": "FS Overtime Labor",\n          "index": "ovr"\n        }\n      ]\n    },\n    {\n      "label": "labor_item_desc",\n      "create": true,\n      "entity": "inventory",\n      "type": "enum",\n      "gui": "combobox",\n      "duplicate": 0,\n      "line_count": 0,\n      "name": {\n        "lang": "en",\n        "active": 0,\n        "val": "Labor Item Description"\n      },\n      "lookups": [\n        {\n          "lang": "en",\n          "active": 1,\n          "val": "FS Tech Actual Travel",\n          "index": "trv"\n        },\n        {\n          "lang": "en",\n          "active": 1,\n          "val": "Regular Labor Time",\n          "index": "reg"\n        },\n        {\n          "lang": "en",\n          "active": 1,\n          "val": "Overtime Labor Time",\n          "index": "ovr"\n        }\n      ]\n    },\n    {\n      "label": "labor_start_time",\n      "create": true,\n      "entity": "inventory",\n      "type": "string",\n      "gui": "text",\n      "duplicate": 0,\n      "line_count": 1,\n      "name": {\n        "lang": "en",\n        "active": 1,\n        "val": "Labor Start Time"\n      }\n    },\n    {\n      "label": "labor_end_time",\n      "create": true,\n      "entity": "inventory",\n      "type": "string",\n      "gui": "text",\n      "duplicate": 0,\n      "line_count": 1,\n      "name": {\n        "lang": "en",\n        "active": 1,\n        "val": "Labor End Time"\n      }\n    },\n    {\n      "label": "expense_service_activity",\n      "create": true,\n      "entity": "inventory",\n      "type": "enum",\n      "gui": "combobox",\n      "duplicate": 0,\n      "line_count": 0,\n      "name": {\n        "lang": "en",\n        "active": 0,\n        "val": "Expense Activity"\n      },\n      "lookups": [\n        {\n          "lang": "en",\n          "active": 1,\n          "val": "Travel",\n          "index": "trv"\n        },\n        {\n          "lang": "en",\n          "active": 1,\n          "val": "Miscellaneous",\n          "index": "msc"\n        }\n      ]\n    },\n    {\n      "label": "expense_item_number",\n      "create": true,\n      "entity": "inventory",\n      "type": "enum",\n      "gui": "combobox",\n      "duplicate": 0,\n      "line_count": 0,\n      "name": {\n        "lang": "en",\n        "active": 0,\n        "val": "Expense Item"\n      },\n      "lookups": [\n        {\n          "lang": "en",\n          "active": 1,\n          "val": "Toll Charges",\n          "index": "tol"\n        },\n        {\n          "lang": "en",\n          "active": 1,\n          "val": "Parking",\n          "index": "prk"\n        }\n      ]\n    },\n    {\n      "label": "expense_item_desc",\n      "create": true,\n      "entity": "inventory",\n      "type": "enum",\n      "gui": "combobox",\n      "duplicate": 0,\n      "line_count": 0,\n      "name": {\n        "lang": "en",\n        "active": 0,\n        "val": "Expense Item Description"\n      },\n      "lookups": [\n        {\n          "lang": "en",\n          "active": 1,\n          "val": "Toll Charges for Service",\n          "index": "tol"\n        },\n        {\n          "lang": "en",\n          "active": 1,\n          "val": "Parking Charges for Service",\n          "index": "prk"\n        }\n      ]\n    },\n    {\n      "label": "part_service_activity_used",\n      "create": true,\n      "entity": "inventory",\n      "type": "enum",\n      "gui": "combobox",\n      "duplicate": 0,\n      "line_count": 0,\n      "name": {\n        "lang": "en",\n        "active": 0,\n        "val": "Activity (Used)"\n      },\n      "lookups": [\n        {\n          "lang": "en",\n          "active": 1,\n          "val": "Install",\n          "index": "IN"\n        },\n        {\n          "lang": "en",\n          "active": 1,\n          "val": "Warranty Install",\n          "index": "W_IN"\n        }\n      ]\n    },\n    {\n      "label": "part_service_activity_returned",\n      "create": true,\n      "entity": "inventory",\n      "type": "enum",\n      "gui": "combobox",\n      "duplicate": 0,\n      "line_count": 0,\n      "name": {\n        "lang": "en",\n        "active": 0,\n        "val": "Activity (returned)"\n      },\n      "lookups": [\n        {\n          "lang": "en",\n          "active": 1,\n          "val": "Return",\n          "index": "RET"\n        },\n        {\n          "lang": "en",\n          "active": 1,\n          "val": "Warranty Return",\n          "index": "W_RET"\n        }\n      ]\n    },\n    {\n      "label": "part_item_number_rev",\n      "create": true,\n      "entity": "inventory",\n      "type": "string",\n      "gui": "text",\n      "duplicate": 0,\n      "line_count": 1,\n      "name": {\n        "lang": "en",\n        "active": 1,\n        "val": "Part Item + Revision"\n      }\n    },\n    {\n      "label": "part_item_number",\n      "create": true,\n      "entity": "inventory",\n      "type": "string",\n      "gui": "text",\n      "duplicate": 0,\n      "line_count": 1,\n      "name": {\n        "lang": "en",\n        "active": 1,\n        "val": "Part Item"\n      }\n    },\n    {\n      "label": "part_item_revision",\n      "create": true,\n      "entity": "inventory",\n      "type": "string",\n      "gui": "text",\n      "duplicate": 0,\n      "line_count": 1,\n      "name": {\n        "lang": "en",\n        "active": 1,\n        "val": "Part Item Revision"\n      }\n    },\n    {\n      "label": "part_item_desc",\n      "create": true,\n      "entity": "inventory",\n      "type": "string",\n      "gui": "text",\n      "duplicate": 0,\n      "line_count": 1,\n      "name": {\n        "lang": "en",\n        "active": 1,\n        "val": "Part Item Description"\n      }\n    },\n    {\n      "label": "part_uom_code",\n      "create": true,\n      "entity": "inventory",\n      "type": "enum",\n      "gui": "combobox",\n      "duplicate": 0,\n      "line_count": 0,\n      "name": {\n        "lang": "en",\n        "active": 0,\n        "val": "Part Unit of Measure"\n      },\n      "lookups": [\n        {\n          "lang": "en",\n          "active": 1,\n          "val": "ea",\n          "index": "ea"\n        },\n        {\n          "lang": "en",\n          "active": 1,\n          "val": "m",\n          "index": "m"\n        },\n        {\n          "lang": "en",\n          "active": 1,\n          "val": "in",\n          "index": "in"\n        }\n      ]\n    },\n    {\n      "label": "part_disposition_code",\n      "create": true,\n      "entity": "inventory",\n      "type": "enum",\n      "gui": "combobox",\n      "duplicate": 0,\n      "line_count": 0,\n      "name": {\n        "lang": "en",\n        "active": 0,\n        "val": "Part Disposition"\n      },\n      "lookups": [\n        {\n          "lang": "en",\n          "active": 1,\n          "val": "No Return",\n          "index": "N"\n        },\n        {\n          "lang": "en",\n          "active": 1,\n          "val": "Slow Return",\n          "index": "S"\n        },\n        {\n          "lang": "en",\n          "active": 1,\n          "val": "Fast Return",\n          "index": "M"\n        }\n      ]\n    },\n    {\n      "label": "expense_currency_code",\n      "create": true,\n      "entity": "inventory",\n      "type": "enum",\n      "gui": "combobox",\n      "duplicate": 0,\n      "line_count": 0,\n      "name": {\n        "lang": "en",\n        "active": 0,\n        "val": "Expense Currency"\n      },\n      "lookups": [\n        {\n          "lang": "en",\n          "active": 1,\n          "val": "$|US Dollars",\n          "index": "USD"\n        },\n        {\n          "lang": "en",\n          "active": 1,\n          "val": "â‚¬|Euro",\n          "index": "EUR"\n        }\n      ]\n    },\n    {\n      "label": "expense_amount",\n      "create": true,\n      "entity": "inventory",\n      "type": "string",\n      "gui": "text",\n      "duplicate": 0,\n      "line_count": 1,\n      "name": {\n        "lang": "en",\n        "active": 0,\n        "val": "Expense"\n      }\n    },\n    {\n      "label": "ccompany",\n      "create": true,\n      "entity": "activity",\n      "type": "string",\n      "gui": "text",\n      "duplicate": 0,\n      "line_count": 1,\n      "name": {\n        "lang": "en",\n        "active": 1,\n        "val": "Company name"\n      }\n    },\n    {\n      "label": "invoice",\n      "create": true,\n      "entity": "activity",\n      "type": "file",\n      "gui": "file",\n      "duplicate": 0,\n      "name": {\n        "lang": "en",\n        "active": 1,\n        "val": "Invoice"\n      },\n      "mime_types": "application/pdf",\n      "file_size_limit": 5\n    },\n    {\n      "label": "pid",\n      "entity": "provider",\n      "create": false\n    },\n    {\n      "label": "pname",\n      "entity": "provider",\n      "create": false\n    },\n    {\n      "label": "astatus",\n      "entity": "activity",\n      "create": false\n    },\n    {\n      "label": "aid",\n      "entity": "activity",\n      "create": false\n    },\n    {\n      "label": "cname",\n      "entity": "activity",\n      "create": false\n    },\n    {\n      "label": "caddress",\n      "entity": "activity",\n      "create": false\n    },\n    {\n      "label": "ccity",\n      "entity": "activity",\n      "create": false\n    },\n    {\n      "label": "cstate",\n      "entity": "activity",\n      "create": false\n    },\n    {\n      "label": "czip",\n      "entity": "activity",\n      "create": false\n    },\n    {\n      "label": "appt_number",\n      "entity": "activity",\n      "create": false\n    },\n    {\n      "label": "invid",\n      "entity": "inventory",\n      "create": false\n    },\n    {\n      "label": "inv_aid",\n      "entity": "inventory",\n      "create": false\n    },\n    {\n      "label": "inv_pid",\n      "entity": "inventory",\n      "create": false\n    },\n    {\n      "label": "invpool",\n      "entity": "inventory",\n      "create": false\n    },\n    {\n      "label": "invtype",\n      "entity": "inventory",\n      "create": false\n    },\n    {\n      "label": "quantity",\n      "entity": "inventory",\n      "create": false\n    },\n    {\n      "label": "invsn",\n      "entity": "inventory",\n      "create": false\n    }\n  ],\n  "plugin": {\n    "label": "service_checklist",\n    "lang": "en",\n    "val": "Service CheckList"\n  }\n}';});

define('errors/application-critical-error',[],()=>{"use strict";return class{constructor(s,e){this.heading=s,this.message=e}}});

define('text!components/part-preview-component/part-preview-component.html',[],function () { return '<!--\nOracle Field Service Debriefing plugin\n\nCopyright (c) 2023, Oracle and/or its affiliates.\nLicensed under the Universal Permissive License v 1.0 as shown at https://oss.oracle.com/licenses/upl/\n-->\n\n<div class="inventory-details-container" data-bind="\n    click: openDetails,\n    css: { \'inventory-details-container--clickable\': onOpenDetails }\n">\n    <div class="inventory-details">\n        <div class="inventory-image-container margin-right-2" data-bind="css: { \'inventory-image-container--no-image\': noImage }">\n            <!-- ko if: previewImage -->\n            <img class="inventory-image" data-bind="\n                attr: {src: previewImage, alt: model.label},\n                css: { hidden: noImage },\n                event: { load: imageLoaded }\n            " src="" alt=""/>\n            <!-- /ko -->\n        </div>\n        <div class="inventory-information">\n            <div>\n                <span class="inventory-title" data-bind="\n                    textHighlighted: model.label,\n                    searchString: searchRequest\n                "></span>\n            </div>\n            <div class="inventory-properties margin-bottom">\n                <div data-bind="visible: catalogCollection.items().length > 1">\n                    <span class="inventory-property-label">Catalog</span>:\n                    <span class="inventory-property-value" data-bind="text: catalogName"></span>\n                </div>\n                <!-- ko foreach: {data: previewFields, as: \'field\'} -->\n                <div>\n                    <span class="inventory-property-label" data-bind="text: field.title"></span>:\n                    <span class="inventory-property-value" data-bind="\n                        textHighlighted: field.value,\n                        searchString: $parent.searchRequest,\n                        searchable: field.searchable\n                    ">\n                    </span>\n                </div>\n                <!-- /ko -->\n            </div>\n            <div class="inventory-properties inventory-properties--full margin-top margin-bottom" data-bind="\n                visible: showAllFields,\n                foreach: { data: detailFields, as: \'field\' }\n            ">\n                <div>\n                    <span class="inventory-property-label" data-bind="text: field.title"></span>:\n                    <span class="inventory-property-value" data-bind="text: field.value"></span>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>';});

define('components/part-preview-component/part-preview-component',["knockout","text!./part-preview-component.html"],(e,l)=>{class t{constructor({model:l,catalogCollection:t,onOpenDetails:i,searchRequest:a,showAllFields:s}){this.model=l,this.catalogCollection=t,this.onOpenDetails=i||null,this.searchRequest=a||null,this.showAllFields=!!s,this.catalogName=this.catalogCollection.getByIdOrCreate(this.model.catalogId).name,this.previewFields=e.pureComputed(()=>{if(!this.catalogCollection.has(this.model.catalogId))return[];return this.catalogCollection.getByIdOrCreate(this.model.catalogId).previewFieldSchemas.map(e=>({title:e.name,label:e.label,searchable:e.searchable,value:this.model.fields[e.label]})).filter(e=>void 0!==e.value&&null!==e.value)}),this.detailFields=e.pureComputed(()=>{if(!this.catalogCollection.has(this.model.catalogId))return[];return this.catalogCollection.getByIdOrCreate(this.model.catalogId).nonPreviewFieldSchemas.map(e=>({title:e.name,label:e.label,searchable:e.searchable,value:this.model.fields[e.label]})).filter(e=>void 0!==e.value&&null!==e.value)}),this.previewImage=e.pureComputed(()=>{let e=this.model.images;return e.length>=1?e[0]:null}),this.noImage=e.observable(!0)}imageLoaded(){this.noImage(!1)}openDetails(e,l){this.onOpenDetails instanceof Function&&this.onOpenDetails(this.model),l.stopPropagation()}dispose(){this.previewFields&&this.previewFields.dispose(),this.previewFields=null,this.previewImage&&this.previewImage.dispose(),this.previewImage=null,this.model=null}}let i=t;return e.components.register("part-preview",{viewModel:i,template:l}),t});
define('components/index',["./part-preview-component/part-preview-component"],()=>{});
define('utils/dom',[],()=>{const e={offsetHeightWithMargin:e=>{const t=e.offsetHeight,o=getComputedStyle(e);return t+(parseInt(o.marginTop)+parseInt(o.marginBottom))},insertHTMLBeforeElement:(e,t)=>t.insertAdjacentHTML("beforebegin",e),resetScrolling:()=>{window.scrollTo(document.body.scrollLeft,document.body.scrollTop)}};return e});
define('viewModels/add-expense',["knockout","utils/dom","ojs/ojarraydataprovider","ojs/ojselectcombobox","ojs/ojinputtext","ojs/ojselectcombobox","ojs/ojinputnumber","ojs/ojvalidationgroup","ojs/ojformlayout"],function(e,t,i){return function(){return new class{handleActivated(t){this._controller=t.valueAccessor().params.app,this.expenseActivityEnumCollection=this._controller.expenseActivityEnumCollection,this.expenseItemEnumCollection=this._controller.expenseItemEnumCollection,this.expenseCurrencyEnumCollection=this._controller.expenseCurrencyEnumCollection,this.activityId=e.observable(""),this.expenseItemId=e.observable(""),this.amount=e.observable(0),this.currencyKey=e.observable(""),this.selectMessagesCustomBillingType=e.observable([]),this.selectMessagesCustomBillingItem=e.observable([]),this.selectMessagesCustomCurrency=e.observable([]),this.dataValidation={detail:"Enter a valid value.",summary:"",severity:"error"},this.activityEnumArray=new i(this.expenseActivityEnumCollection.map(e=>({value:e.get("id"),label:e.get("text")})),{keyAttributes:"value"}),this.activityId(this.activityEnumArray.data[0].value),this.expenseCurrencyEnumArray=new i(this.expenseCurrencyEnumCollection.map(e=>({value:e.get("id"),label:e.get("text")})),{keyAttributes:"value"}),this.currencyKey(this.expenseCurrencyEnumArray.data[0].value),this.expenseItemEnumArray=new i(this.expenseItemEnumCollection.map(e=>({value:e.get("id"),label:e.get("label")})),{keyAttributes:"value"}),this.expenseItemId(this.expenseItemEnumArray.data[0].value),this.expenseItemDescription=e.pureComputed(()=>this.expenseItemId()?this.expenseItemEnumCollection.get(this.expenseItemId()).get("label"):"")}handleAttached(e){}handleBindingsApplied(e){t.resetScrolling()}handleDetached(e){}submit(){const e=this._controller.checkValidationGroup(),t=this._validateBillingType(this.activityId),i=this._validateBillingItem(this.expenseItemId),s=this._validateCurrency(this.currencyKey);e&&!t&&this.selectMessagesCustomBillingType([this.dataValidation]),e&&!i&&this.selectMessagesCustomBillingItem([this.dataValidation]),e&&!s&&this.selectMessagesCustomCurrency([this.dataValidation]),e&&t&&i&&s&&(this._controller.addExpense({activityId:this.activityId(),itemId:this.expenseItemId(),amount:this.amount(),currencyKey:this.currencyKey()}),this._controller.router.go("dashboard",{historyUpdate:"replace"}))}_validateBillingType(){return!!this.activityEnumArray.data.find(e=>e.value===this.activityId())}_validateBillingItem(){return!!this.expenseItemEnumArray.data.find(e=>e.value===this.expenseItemId())}_validateCurrency(){return!!this.expenseCurrencyEnumArray.data.find(e=>e.value===this.currencyKey())}dispose(){this._controller.router.go("dashboard",{historyUpdate:"replace"})}}}});
define('viewModels/add-labor',["knockout","jquery","utils/dom","ojs/ojcore","ojs/ojarraydataprovider","ojs/ojselectcombobox","ojs/ojinputtext","ojs/ojdatetimepicker","ojs/ojmessages","ojs/ojvalidationgroup","ojs/ojformlayout"],function(t,e,i,a,s){return function(){return new class{constructor(){this.activityId=t.observable(""),this.laborItemId=t.observable(""),this.startTime=t.observable(""),this.endTime=t.observable(""),this.selectMessagesCustomBillingType=t.observable([]),this.selectMessagesCustomBillingItem=t.observable([]),this.dataValidation={detail:"Enter a valid value.",summary:"",severity:"error"},this.isStartTimeValid=t.observable(!0),this.isEndTimeValid=t.observable(!0),this.isSubmitDisabled=t.pureComputed(()=>!(this.isStartTimeValid()&&this.isEndTimeValid())),this.laborItemDescription=t.pureComputed(()=>this.laborItemId()?this.laborItemEnumCollection.get(this.laborItemId()).get("label"):""),this.durationHours=t.pureComputed(()=>{if(!this.startTime()||!this.endTime())return"";let t=(this.dateTimeConverter.compareISODates(this.dateTimeConverter.parse(this.endTime()),this.dateTimeConverter.parse(this.startTime()))/1e3/60/60).toFixed(2);return t<0?+t+24:t}),this.handleActivated=function(t){this._controller=t.valueAccessor().params.app,this.laborActivityEnumCollection=this._controller.laborActivityEnumCollection,this.laborItemEnumCollection=this._controller.laborItemEnumCollection,this.dateTimeConverter=this._controller.dateTimeConverter,this.activityEnumArray=new s(this.laborActivityEnumCollection.map(t=>({value:t.get("id"),label:t.get("text")})),{keyAttributes:"value"}),this.activityId(this.activityEnumArray.data[0].value),this.laborItemEnumArray=new s(this.laborItemEnumCollection.map(t=>({value:t.get("id"),label:t.get("label")})),{keyAttributes:"value"}),this.laborItemId(this.laborItemEnumArray.data[0].value)},this.handleAttached=function(t){},this.handleBindingsApplied=function(t){i.resetScrolling()},this.handleDetached=function(t){this.activityId(""),this.laborItemId("")},this.startTime.subscribe(()=>{document.getElementById("endTimeEl").validate()}),this.appMessages=t.observable(),this.durationValidator={validate:t=>{let e=this.startTime();if(!t&&!e)throw new a.ValidatorError("Time should be indicated","Please, input time.");t<e&&this.appMessages([{summary:"Info",detail:"Overnight",severity:a.Message.SEVERITY_TYPE.INFO}])}},this.onStartTimeValidChanged=(t=>{this.isStartTimeValid("valid"===t.detail.value)}),this.onEndTimeValidChanged=(t=>{this.isEndTimeValid("valid"===t.detail.value)})}addLabor(){const t=this._controller.checkValidationGroup(),e=this._validateBillingType(this.activityId),i=this._validateBillingItem(this.laborItemId);t&&!e&&this.selectMessagesCustomBillingType([this.dataValidation]),t&&!i&&this.selectMessagesCustomBillingItem([this.dataValidation]),t&&e&&i&&(this._controller.addLabor({activityId:this.activityId(),itemId:this.laborItemId(),startTime:this.startTime(),endTime:this.endTime()}),this._controller.router.go("dashboard",{historyUpdate:"replace"}))}_validateBillingType(){return!!this.activityEnumArray.data.find(t=>t.value===this.activityId())}_validateBillingItem(){return!!this.laborItemEnumArray.data.find(t=>t.value===this.laborItemId())}onCloseButtonClick(){this._controller.router.go("dashboard",{historyUpdate:"replace"})}}}});
define('utils/ko-text-highlighted-binding',["knockout"],t=>{let i={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"},e=t=>String(t).replace(/[&<>"'`=\/]/g,t=>i[t]),s=(t,i,s)=>{let n,r=-1;if(null!==s&&void 0!==s&&null!==i&&void 0!==i){n="string"==typeof s?s.toLowerCase().trim():s.toString().toLowerCase().trim();let t="string"==typeof i?i.toLowerCase():i.toString().toLowerCase();t.length>=n.length&&(r=t.indexOf(n))}if(r>=0){let s="string"==typeof i?i:i.toString(),o=n.length,l="";l+=e(s.substr(0,r)),l+='<span class="highlight">',l+=e(s.substr(r,o)),l+="</span>",l+=e(s.substring(r+o)),t.innerHTML=l}else t.innerText=i};t.bindingHandlers.textHighlighted={init:function(i,e,s,n,r){i.__textHighlitedSubscriptions=[],t.utils.domNodeDisposal.addDisposeCallback(i,()=>{i.__textHighlitedSubscriptions.forEach(t=>t.dispose())})},update:function(i,e,n,r,o){let l=e(),g=n.get("searchString");t.isObservable(l)&&i.__textHighlitedSubscriptions.push(l.subscribe(e=>{s(i,e,t.unwrap(g))})),t.isObservable(g)&&i.__textHighlitedSubscriptions.push(g.subscribe(e=>{s(i,t.unwrap(l),e)})),s(i,t.unwrap(l),t.unwrap(g))}}});
define('viewModels/add-returned-part',["knockout","utils/dom","ojs/ojarraydataprovider","ojs/ojinputtext","ojs/ojinputnumber","ojs/ojlistview","ojs/ojformlayout","ojs/ojselectcombobox","ojs/ojvalidationgroup","ojs/ojinputsearch","utils/ko-text-highlighted-binding"],function(t,e,i){return function(){return new class{handleActivated(e){this._controller=e.valueAccessor().params.app,this.partActivityReturnedEnumCollection=this._controller.partActivityReturnedEnumCollection,this.activityId=t.observable(""),this.serialNum=t.observable(""),this.isSerialized=t.observable(!1),this.displayMoreButton=t.observable(!1),this.inventories=this._controller.customerPartsCollection.map(t=>this.getInventoryViewModel(t)).sort((t,e)=>{let i=t.inventory.get("part_item_number")||"",r=e.inventory.get("part_item_number")||"";return i.toString().localeCompare(r)}),this.inventoriesDataProvider=new oj.ArrayDataProvider(this.inventories,{idAttribute:"id"}),this.selectMessagesCustomBillingType=t.observable([]),this.isSearchByPartsCatalog=t.observable(!1),this.listViewSelection=t.observable([]),this.listViewSelection.subscribe(t=>{if(t&&1===t.length){let e=t[0],i=this.inventories.find(t=>t.id===e);i&&this.selectedInventory(i)}}),this.dataValidation={detail:"Enter a valid value.",summary:"",severity:"error"},this.selectedInventory=t.observable(null),this.selectedIventoryMeasureUnit=t.pureComputed(()=>{let t=this.selectedInventory();return t&&this._controller.attributeDescription.part_uom_code&&this._controller.attributeDescription.part_uom_code.enum&&t.inventory.get("part_uom_code")&&this._controller.attributeDescription.part_uom_code.enum[t.inventory.get("part_uom_code")]?this._controller.attributeDescription.part_uom_code.enum[t.inventory.get("part_uom_code")].text:""}),this.activityEnumArray=new i(this.partActivityReturnedEnumCollection.map(t=>({value:t.get("id"),label:t.get("text")})),{keyAttributes:"value"}),this.activityId(this.activityEnumArray.data[0].value),this.quantity=t.observable(1),this.searchRequest=t.observable(""),this.isSearchContinueAvailable=t.observable(!1),this.currentSearchId=t.observable(null),this.searchContinueLoading=t.observable(!1),this.isLoading=t.observable(!1),this.isSearchInProgress=t.observable(!1),this.searchResultItems=t.observableArray([]),this.currentSearchPromise=Promise.resolve(),this.noResults=t.pureComputed(()=>this.searchResultItems().length<=0),this._nextSearchRequest=null,this.searchRequestFiltered=t.pureComputed(()=>{let t=this.searchRequest();return(t=t.trim()).length<3?"":t}),this.partsCatalogDataService=this._controller.partsCatalogDataService,this.catalogCollection=this._controller.catalogCollection,this.searchRequestFiltered.subscribe(t=>{if(!t)return this._nextSearchRequest=null,this.clearSearchResults(),this.isLoading(!1),this.isSearchInProgress(!1),this.isSearchContinueAvailable(!1),this.searchContinueLoading(!1),void this.currentSearchId(null);this.isLoading(!0),this.isSearchInProgress(!0),null===this._nextSearchRequest?(this._nextSearchRequest=t,this.currentSearchPromise.then(()=>{let t=this._nextSearchRequest;if(!t)return Promise.resolve();this._nextSearchRequest=null;let e=[];return e.push(this.partsCatalogDataService.searchParts(t,10).then(t=>(this.isSearchContinueAvailable(t.isContinueAvailable),this.searchContinueLoading(!1),this.currentSearchId(t.searchId),this.searchResultItems(t.items),Promise.resolve()))),this.currentSearchPromise=Promise.all(e).then(()=>{this.isLoading(!1)}).catch(t=>{console.error(t),this.isLoading(!1)}),this.currentSearchPromise})):this._nextSearchRequest=t}),this.showSearchResults=t.pureComputed(()=>{let t=this.isSearchInProgress(),e=this.isLoading();return!(!t||e&&this.searchResultItems().length<=0&&!this.noResults())}),this.isSerialized=t.pureComputed(()=>this.serialNum().length>0),this.isSerialized.subscribe(t=>{this.quantity(1)})}clearSearchResults(){this.searchResultItems([])}continueSearch(){if(!this.isSearchContinueAvailable()||!this.currentSearchId()||this.searchContinueLoading())return!1;this.searchContinueLoading(!0);let t=this.currentSearchId();this.partsCatalogDataService.searchPartsContinue(t).then(e=>{this._disposed||this.currentSearchId()===t&&(this.searchContinueLoading(!1),this.searchResultItems(this.searchResultItems().concat(e.items)),this.isSearchContinueAvailable(e.isContinueAvailable),this.currentSearchId(e.searchId))})}partSelected(t){let e=t.fields.part_uom_code||"ea";this._controller.attributeDescription.part_uom_code&&this._controller.attributeDescription.part_uom_code.enum[e]||(e="ea");let i=t.fields.part_disposition_code||"N";this._controller.attributeDescription.part_disposition_code.enum[i]||(i="N");let r=new this._controller.partModelConstructor({part_item_number:""+t.fields.part_item_number||"",part_item_revision:""+t.fields.part_item_revision||"",part_item_number_rev:t.label,part_item_desc:t.fields.part_item_desc||"",part_uom_code:e,part_disposition_code:i,invtype:"part",invpool:"deinstall",inv_aid:this._controller.ofscActivityModel.get("aid"),inv_pid:this._controller.resource.get("id")});this.selectedInventory(this.getInventoryViewModel(r)),console.log("PART SELECTED: ",t)}searchAtPartsCatalog(){this.clearSearchResults(),this.searchRequest(""),this.isSearchByPartsCatalog(!0)}getInventoryViewModel(t){let e="";return this._controller.attributeDescription.part_uom_code&&this._controller.attributeDescription.part_uom_code.enum&&this._controller.attributeDescription.part_uom_code.enum[t.get("part_uom_code")]&&(e=this._controller.attributeDescription.part_uom_code.enum[t.get("part_uom_code")].text),""!==e&&(e=" "+e),{id:t.get("part_item_number_rev"),inventory:t,measuredQuantity:t.get("quantity")?`${t.get("quantity")}${e}`:"",dispositionText:t.get("part_disposition_code")&&this._controller.attributeDescription.part_disposition_code&&this._controller.attributeDescription.part_disposition_code.enum&&this._controller.attributeDescription.part_disposition_code.enum[t.get("part_disposition_code")]&&this._controller.attributeDescription.part_disposition_code.enum[t.get("part_disposition_code")].text}}submit(){const t=this._controller.checkValidationGroup(),e=""!==this.activityId&&this._validateBillingType(this.activityId);if(t&&!e&&this.selectMessagesCustomBillingType([this.dataValidation]),t&&e){let t=this.selectedInventory().inventory,e=this.quantity(),i=null;if(""!=this.serialNum()){i=this.serialNum(),e=1;let r=this._controller.returnedPartsCollection.findWhere({part_item_number_rev:t.get("part_item_number_rev"),invsn:i});if(r&&1==r.get("quantity"))return void this._controller.errorAlertPopup("Critical Error",t.get("part_item_number_rev")+"("+i+") is already added.")}t.set("invsn",i),this._controller.addReturnedPart(t,this.activityId(),e,i),this._controller.router.go("dashboard",{historyUpdate:"replace"})}}_validateBillingType(){return!!this.activityEnumArray.data.find(t=>t.value===this.activityId())}handleAttached(t){}handleBindingsApplied(t){e.resetScrolling()}handleDetached(t){}back(){this.selectedInventory()?this.selectedInventory(null):this.isSearchByPartsCatalog()?this.isSearchByPartsCatalog(!1):this.dismiss()}dismiss(){this.selectedInventory()?(this.listViewSelection([]),this.selectedInventory(null)):this._controller.router.go("dashboard",{historyUpdate:"replace"})}}}});
define('viewModels/add-used-part',["knockout","utils/dom","ojs/ojarraydataprovider","ojs/ojinputsearch","ojs/ojinputnumber","ojs/ojlistview","ojs/ojformlayout","ojs/ojselectcombobox","ojs/ojvalidationgroup","utils/ko-text-highlighted-binding"],function(t,e,i){return function(){return new class{handleActivated(e){this._controller=e.valueAccessor().params.app,this.partActivityUsedEnumCollection=this._controller.partActivityUsedEnumCollection,this.activityId=t.observable(""),this.searchSubstring=t.observable(""),this.serialNum=t.observable(""),this.selectedSerialInvId=t.observable(),this.selectMessagesCustomSerial=t.observable([]),this.selectMessagesCustomBillingType=t.observable([]),this.searchSubstringDebounced=t.pureComputed(()=>this.searchSubstring()).extend({rateLimit:250}),this.searchSubstringIsEmpty=t.pureComputed(()=>this.searchSubstringDebounced().length<=0),this.searchResults=t.computed(()=>this._controller.inventorySearchService.searchBySubstring(this.searchSubstringDebounced()).map(t=>this.getInventoryViewModel(t)).slice(0,20)),this.invTypePart=this._controller.getInvTypePartConst(),this.invTypePartSN=this._controller.getInvTypePartSnConst(),this.searchResultsObservableArray=t.observableArray(),this.searchResultsSubscription=this.searchResults.subscribe(t=>{this.searchResultsObservableArray(t)}),this.searchResultsDataProvider=new oj.ArrayDataProvider(this.searchResultsObservableArray,{keyAttributes:["id","invsn"]}),this.listViewSelection=t.observable([]),this.listViewSelection.subscribe(t=>{if(t&&1===t.length){let e=t[0][0],r=t[0][1],s=this.searchResults().find(t=>t.id===e&&t.invsn===r);if(s.inventory.get("invtype")===this.invTypePartSN){if(!(s.inventory.get("quantity")>0))return void this._controller.errorAlertPopup("Critical Error",e+"("+r+") is not available in your inventory. Please update your inventory with this item and proceed.");if(this.invSerialNumArray=new i(this._controller.resourcePartsCollection.filter(t=>t.get("part_item_number_rev")===e&&t.get("quantity")>0&&null!==t.get("invsn")).map(t=>({value:t.get("invsn"),label:t.get("invsn")})),{keyAttributes:"value"}),this.serialNum(r),0===this.invSerialNumArray.data.length)return void this._controller.errorAlertPopup("Critical Error",e+" is not available in your inventory. Please update your inventory with this item and proceed.");this.invSerialNumArray.data.sort((t,e)=>t.value.localeCompare(e.value))}s&&this.selectedInventory(s)}}),this.dataValidation={detail:"Enter a valid value.",summary:"",severity:"error"},this.selectedInventory=t.observable(null),this.selectedIventoryMeasureUnit=t.pureComputed(()=>{let t=this.selectedInventory();return t&&this._controller.attributeDescription.part_uom_code&&this._controller.attributeDescription.part_uom_code.enum&&t.inventory.get("part_uom_code")&&this._controller.attributeDescription.part_uom_code.enum[t.inventory.get("part_uom_code")]?this._controller.attributeDescription.part_uom_code.enum[t.inventory.get("part_uom_code")].text:""}),this.activityEnumArray=new i(this.partActivityUsedEnumCollection.map(t=>({value:t.get("id"),label:t.get("text")})),{keyAttributes:"value"}),this.activityId(this.activityEnumArray.data[0].value),this.quantity=t.observable(1)}getInventoryViewModel(t){let e="";return this._controller.attributeDescription.part_uom_code&&this._controller.attributeDescription.part_uom_code.enum&&this._controller.attributeDescription.part_uom_code.enum[t.get("part_uom_code")]&&(e=this._controller.attributeDescription.part_uom_code.enum[t.get("part_uom_code")].text),""!==e&&(e=" "+e),{id:t.get("part_item_number_rev"),invsn:t.get("invsn"),inventory:t,measuredQuantity:`${t.get("quantity")}${e}`,dispositionText:t.get("part_disposition_code")&&this._controller.attributeDescription.part_disposition_code&&this._controller.attributeDescription.part_disposition_code.enum&&this._controller.attributeDescription.part_disposition_code.enum[t.get("part_disposition_code")]&&this._controller.attributeDescription.part_disposition_code.enum[t.get("part_disposition_code")].text}}submit(){const t=this._controller.checkValidationGroup(),e=!this._isSerializedInventory()||this._validateSerialNum(this.serialNum),i=this._validateBillingType(this.activityId);if(t&&!i&&this.selectMessagesCustomBillingType([this.dataValidation]),t&&!e&&this.selectMessagesCustomSerial([this.dataValidation]),t&&e&&i){let t=this.selectedInventory().inventory,e=this.quantity(),i=null;""!=this.serialNum()&&(i=this.serialNum()),this._controller.addUsedPart(t.get("part_item_number_rev"),this.activityId(),e,i),this._controller.router.go("dashboard",{historyUpdate:"replace"})}}_validateSerialNum(){return!!this.invSerialNumArray.data.find(t=>t.value===this.serialNum())}_validateBillingType(){return!!this.activityEnumArray.data.find(t=>t.value===this.activityId())}_isSerializedInventory(){return this.selectedInventory().inventory.get("invtype")===this.invTypePartSN}handleAttached(t){}handleBindingsApplied(t){e.resetScrolling()}handleDetached(t){this.searchResultsSubscription&&this.searchResultsSubscription.dispose&&this.searchResultsSubscription.dispose(),this.searchResultsSubscription=null,this.activityId("")}dismiss(){this.selectedInventory()?(this.listViewSelection([]),this.selectedInventory(null)):this._controller.router.go("dashboard",{historyUpdate:"replace"})}}}});
define('viewModels/dashboard',["knockout","jquery","utils/dom","ojs/ojcore","ojs/ojarraydataprovider","ojs/ojcollectiontabledatasource","ojs/ojlistview","ojs/ojlistitemlayout","ojs/ojbutton","ojs/ojoption","ojs/ojcollapsible","ojs/ojdialog"],function(e,t,r,i,s){return function(){return new class{constructor(){this.handleActivated=function(t){this._controller=t.valueAccessor().params.app,this.openData=e.pureComputed(()=>JSON.stringify(this._controller.openData(),null,4)),this.isViewable=e.observable(!1),this.laborItems=this._controller.laborItems,this.expenseItems=this._controller.expenseItems,this.usedPartsCollection=this._controller.usedPartsCollection,this.returnedPartsCollection=this._controller.returnedPartsCollection,this.laborDataProvider=new s(this.laborItems,{idAttribute:"id"}),console.log("Labor Items:"+this.laborItems),this.expenseDataProvider=new s(this.expenseItems,{idAttribute:"id"}),this.usedPartsObservableArray=e.observableArray(this._getUsedPartsArray()),this.usedPartsDataSource=new s(this.usedPartsObservableArray,{idAttribute:"id"}),this.returnedPartsObservableArray=e.observableArray(this._getReturnedPartsArray()),this.returnedPartsDataSource=new s(this.returnedPartsObservableArray,{idAttribute:"id"}),this._activityModel=this._controller.ofscActivityModel,this.dialogHeading=e.observable(""),this.currentItemId=e.observable(""),this.emptyDashboard=e.pureComputed(()=>this.laborItems().length>0||this.expenseItems().length>0||this.usedPartsObservableArray().length>0||this.returnedPartsObservableArray().length>0),this.menuItemAction=(e=>{this.selectedMenuItem(e.detail.selectedValue)}),this.selectedMenuItem=e.observable(""),this.selectedMenuItem.subscribe(e=>{if("labor"===e)this._controller.router.go("add-labor");else{if("addParts"===e)return this._controller.router.go("add-used-part");if("returnParts"===e)return this._controller.router.go("add-returned-part");if("expenses"===e)return this._controller.router.go("add-expense");if("serviceChecklist"===e)return this._controller.router.go("service-checklist")}})},this.handleAttached=function(e){},this.handleBindingsApplied=function(e){r.resetScrolling()},this.handleDetached=function(e){}}closeDialog(){document.getElementById("modalDialog").close()}openDialog(e,t,r){var i="";"labor"===e||"expenses"===e?i=r.data.item_label:"usedParts"!==e&&"returnParts"!==e||(i=this.getpopupMessage(r)),this.dialogHeading("Remove "+i+"?"),r.data.inventory&&""!==r.data.inventory.get("invsn")?this.currentItemId(t.currentTarget.id+","+r.data.inventory.attributes.invsn):this.currentItemId(t.currentTarget.id),document.getElementById("modalDialog").open()}getpopupMessage(e){return null!=e.data.inventory.get("invsn")&&""!=e.data.inventory.get("invsn")?e.data.id.concat(" (",e.data.inventory.get("invsn"),")"):e.data.id.concat(" (",e.data.measuredQuantity,")")}deleteSelectedItem(e){var t=e.currentTarget.id,r=t.split(","),i=r[0],s=r[1],o=r[2];"labor"===s?this.removeSelectedLabors(+i):"expenses"===s?this.removeSelectedExpenses(+i):"usedParts"===s?o&&"null"!==o?this.removeSelectedUsedParts(i,o):this.removeSelectedUsedParts(i,null):"returnParts"===s&&(o&&"null"!==o?this.removeSelectedReturnedParts(i,o):this.removeSelectedReturnedParts(i,null)),this.closeDialog()}_getUsedPartsArray(){return this.usedPartsCollection.filter(e=>(parseInt(e.get("quantity",10))||0)>=1).map(e=>this.getInventoryViewModel(e))}_getReturnedPartsArray(){return this.returnedPartsCollection.filter(e=>(parseInt(e.get("quantity",10))||0)>=1).map(e=>this.getInventoryViewModel(e))}getInventoryViewModel(e){let t="";return this._controller.attributeDescription.part_uom_code&&this._controller.attributeDescription.part_uom_code.enum&&this._controller.attributeDescription.part_uom_code.enum[e.get("part_uom_code")]&&(t=this._controller.attributeDescription.part_uom_code.enum[e.get("part_uom_code")].text),""!==t&&(t=" "+t),{id:e.get("part_item_number_rev"),inventory:e,serviceActivityUsed:e.get("part_service_activity_used")&&this._controller.attributeDescription.part_service_activity_used.enum[e.get("part_service_activity_used")]&&this._controller.attributeDescription.part_service_activity_used.enum[e.get("part_service_activity_used")].text,serviceActivityReturned:e.get("part_service_activity_returned")&&this._controller.attributeDescription.part_service_activity_returned.enum[e.get("part_service_activity_returned")]&&this._controller.attributeDescription.part_service_activity_returned.enum[e.get("part_service_activity_returned")].text,measuredQuantity:`${e.get("quantity")}${t}`,dispositionText:e.get("part_disposition_code")&&this._controller.attributeDescription.part_disposition_code&&this._controller.attributeDescription.part_disposition_code.enum&&this._controller.attributeDescription.part_disposition_code.enum[e.get("part_disposition_code")]&&this._controller.attributeDescription.part_disposition_code.enum[e.get("part_disposition_code")].text}}removeSelectedUsedParts(e,t){this._controller.removeUsedPart(e,t),this.usedPartsObservableArray(this._getUsedPartsArray())}removeSelectedReturnedParts(e,t){this._controller.removeReturnedPart(e,t),this.returnedPartsObservableArray(this._getReturnedPartsArray())}onCloseButtonClick(){this._controller.terminatePlugin()}onPreviewInvoiceButtonClick(){this._controller.router.go("invoice")}onSaveButtonClick(){this._activityModel.unset("csign"),this._activityModel.unset("invoice"),this._controller.submitPluginData()}addLabor({activityId:e,itemId:t,startTime:r,endTime:i}){return this._controller.addLabor({activityId:e,itemId:t,startTime:r,endTime:i})}removeSelectedLabors(e){this._controller.removeLabor(e)}removeSelectedExpenses(e){this._controller.removeExpense(e)}formatDuration(e){return~~(e/60)+":"+("0"+e%60).slice(-2)}}}});
define('utils/signature',["jquery"],function(e){var t=function(t){var n=!0;if(!t)throw new Error("Cannot find canvas element");if(!t.getContext)throw new Error("Canvas' getContext method isn't supported");var o=t.getContext("2d");if(!o)throw new Error("Failed to get canvas' 2d context");t.style.position="relative";t.width=450,t.height=300,o.fillStyle="#fff",o.strokeStyle="#444",o.lineWidth=1.5,o.lineCap="round",o.fillRect(0,0,t.width,t.height),t.setAttribute("data-blank",t.toDataURL());var r="ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch||!1,i=[],d={},u={},v=!1,a=0,s=0,c=window.PointerEvent,l=!0,f=null,m=function(e,t){t.x=e.offsetX,t.y=e.offsetY},h=function(e,t){t.x=e.clientX-a,t.y=e.clientY-s},p=function(e,t){t.x=e.pageX-a,t.y=e.pageY-s},y=function e(n){var o={x:null,y:null};if(void 0===e.resolve&&(void 0!==n.offsetX&&void 0!==n.offsetY?e.resolve=m:void 0!==n.clientX&&void 0!==n.clientY?e.resolve=h:void 0!==n.pageX&&void 0!==n.pageY&&(e.resolve=p)),e.resolve(n,o),!o.x&&0!=o.x||!o.y&&0!=o.y)return!1;var r=t.offsetWidth/t.width;return 0!=r&&(o.x/=r,o.y/=r),o},E=function(e){var n={x:null,y:null};if(e.changedTouches&&e.changedTouches[0]&&p(e.changedTouches[0],n),!n.x&&0!=n.x||!n.y&&0!=n.y)return!1;var o=t.offsetWidth/t.width;return 0!=o&&(n.x/=o,n.y/=o),n},L=function(e){var n={x:null,y:null};if("pen"==e.pointerType||"touch"==e.pointerType){if(void 0===L.resolve&&void 0!==e.pageX&&void 0!==e.pageY&&(L.resolve=p),L.resolve(e,n),!n.x&&0!=n.x||!n.y&&0!=n.y)return!1;var o=t.offsetWidth/t.width;return 0!=o&&(n.x/=o,n.y/=o),n}};if(r){var x=P.bind(null,E),g=R.bind(null,E),w=S;if(c)var b=P.bind(null,L),T=R.bind(null,L),C=S}else var D=P.bind(null,y),X=R.bind(null,y),Y=S;function P(r,u){u.preventDefault(),u.stopPropagation();var v=e(t).offset();a=v.left,s=v.top,t.addEventListener("mousemove",X,!1),t.addEventListener("mouseup",Y,!1),t.addEventListener("touchmove",g,!1),t.addEventListener("touchend",w,!1),t.addEventListener("touchcancel",w,!1),document.body.addEventListener("mouseup",Y,!1),document.body.addEventListener("touchend",w,!1),document.body.addEventListener("touchcancel",w),t.addEventListener("pointermove",T,!1),t.addEventListener("pointercancel",C,!1),t.addEventListener("pointerup",C,!1),document.body.addEventListener("pointerup",C,!1),document.body.addEventListener("pointermove",T,!1),document.body.addEventListener("pointerenter",T,!1),n=!1;var c=r(u);c&&(o.beginPath(),i.push("moveStart"),o.moveTo(c.x,c.y),i.push(c.x,c.y),d=c)}function R(e,t,n){t.preventDefault(),t.stopPropagation();var r=e(t);if(r){var a={x:(d.x+r.x)/2,y:(d.y+r.y)/2};if(v){var s=(u.x+d.x+a.x)/3,c=(u.y+d.y+a.y)/3;i.push(s,c)}else v=!0;o.quadraticCurveTo(d.x,d.y,a.x,a.y),i.push(a.x,a.y),o.stroke(),o.beginPath(),o.moveTo(a.x,a.y),u=a,d=r}}function S(e){t.removeEventListener("mousemove",X),t.removeEventListener("mouseup",Y),t.removeEventListener("touchmove",g),t.removeEventListener("touchend",w),t.removeEventListener("touchcancel",w),document.body.removeEventListener("mouseup",Y),document.body.removeEventListener("touchend",w),document.body.removeEventListener("touchcancel",w),t.removeEventListener("pointermove",T),t.removeEventListener("pointercancel",C),t.removeEventListener("pointerup",C),document.body.removeEventListener("pointerup",C),document.body.removeEventListener("pointermove",T),document.body.removeEventListener("pointerenter",T),o.stroke(),i.push("e"),v=!1,l=!0,f=null}return t.addEventListener("mousedown",D,!1),t.addEventListener("touchstart",x,!1),t.addEventListener("pointerdown",b,!1),{clear:function(){o.clearRect(0,0,t.offsetWidth,t.offsetHeight),o.fillRect(0,0,t.width,t.height),i=[],n=!0,l=!0,f=null},getDataString:function(){return l&&(f=t.toDataURL(),l=!1),f},getPixels:function(){return i.join(", ")},isEmpty:function(){return n},resetEmpty:function(e){n=!!e}}};return window?window.signature=t:window.MobileSignature=t,t});
define('utils/html-page',[],()=>{return class{constructor(e){this.pageHeight=e}remainingPageHeight(e){return e%this.pageHeight}isExceedPageHeight(e){return e>this.pageHeight}}});
define('viewModels/invoice',["knockout","jquery","ojs/ojcore","../utils/signature","../utils/html-page","../utils/dom","ojs/ojknockout-model","ojs/ojdatetimepicker","ojs/ojcollectiontabledatasource"],function(t,e,i,r,n,o){const s='<div class="html2pdf__page-break"></div>',a=new n(1e3),l={jsPDF:{unit:"pt",format:"a4",orientation:"p"},margin:20,image:{type:"jpeg"},html2canvas:{useCORS:!0,scale:2}};return function(){return new class{constructor(){this.invoiceSignature=null,this.printableForm=null,this.printableFormId="printableForm",this.canvasID="canvas_invoice",this.canvasClearButtonID="button_clear_canvas",this.printableCanvasID="printableSignatureCanvas",this.fileName="pro_forma_invoice.pdf",this.handleActivated=function(e){this._controller=e.valueAccessor().params.app,this.laborItems=this._controller.laborItems,this.dateTimeConverter=this._controller.dateTimeConverter,this.timeConverter=this._controller.timeConverter,this._activityModel=this._controller.ofscActivityModel,this.customer=i.KnockoutUtils.map(this._controller.customer),this.resource=i.KnockoutUtils.map(this._controller.resource),this.logoUrl=this._controller.logoUrl(),this.isEmptyLogo=t.pureComputed(()=>this.logoUrl.length>0),this.totalHoursText=t.observable(""),this.laborsTotalHours=t.pureComputed(function(){let t=0;return this.laborItems().length>0&&this.laborItems().forEach(e=>{let i=(this.dateTimeConverter.compareISODates(this.dateTimeConverter.parse(e.endTime),this.dateTimeConverter.parse(e.startTime))/1e3/60/60).toFixed(2);i=i<0?+i+24:i,t+=parseFloat(i)}),this.totalHoursText("hrs"),t.toFixed(2)}.bind(this)),this.expenseItems=this._controller.expenseItems,this.currencySign=t.observable(""),this.totalExpensesAmount=t.pureComputed(function(){let t=0;return this.expenseItems().length>0&&this.expenseItems().forEach(e=>{t+=parseFloat(e.amount),this.currencySign(e.currency_sign)}),t}.bind(this)),this.stateCityText=t.pureComputed(function(){let t=this.customer.state(),e=this.customer.city();return t&&e?t+", "+e:t&&!e?t:!t&&e?e:""}.bind(this)),this.workOrderText=t.pureComputed(function(){let t=this.customer.workorder();return t?"WO"+t:""}.bind(this)),this.currentDate=t.pureComputed(function(){let t=new Date,e=t.getDate(),i=t.getMonth(),r=t.getFullYear();return e+" "+["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][i]+" "+r}.bind(this)),this.usedPartsList=this._controller.usedPartsCollection.filter(t=>t.get("quantity")>0).map(t=>this.getInventoryViewModel(t)).sort((t,e)=>{let i=t.inventory.get("part_item_number")||"",r=e.inventory.get("part_item_number")||"";return i.toString().localeCompare(r)}),this.returnedPartsList=this._controller.returnedPartsCollection.filter(t=>t.get("quantity")>0).map(t=>this.getInventoryViewModel(t)).sort((t,e)=>{let i=t.inventory.get("part_item_number")||"",r=e.inventory.get("part_item_number")||"";return i.toString().localeCompare(r)})},this.handleAttached=function(t){this.printableForm=document.getElementById(this.printableFormId),this._initSignature()},this.handleBindingsApplied=function(t){o.resetScrolling()},this.handleDetached=function(t){this.invoiceSignature=null}}getInventoryViewModel(t){let e="";return this._controller.attributeDescription.part_uom_code&&this._controller.attributeDescription.part_uom_code.enum&&this._controller.attributeDescription.part_uom_code.enum[t.get("part_uom_code")]&&(e=this._controller.attributeDescription.part_uom_code.enum[t.get("part_uom_code")].text),""!==e&&(e=" "+e),{id:t.get("part_item_number_rev"),inventory:t,measuredQuantity:`${t.get("quantity")}${e}`,dispositionText:t.get("part_disposition_code")&&this._controller.attributeDescription.part_disposition_code&&this._controller.attributeDescription.part_disposition_code.enum&&this._controller.attributeDescription.part_disposition_code.enum[t.get("part_disposition_code")]&&this._controller.attributeDescription.part_disposition_code.enum[t.get("part_disposition_code")].text}}formatDuration(t){let e=t.startTime,i=t.endTime,r="";r="hrs";let n=(this.dateTimeConverter.compareISODates(this.dateTimeConverter.parse(i),this.dateTimeConverter.parse(e))/1e3/60/60).toPrecision(2);return(n=n<0?+n+24:n)+" hrs"}formatTime(t){return this.timeConverter.format(t)}_initSignature(){let t=document.getElementById(this.canvasID),e=function(){},i=document.getElementById(this.canvasClearButtonID);this.invoiceSignature=new r(t,i,!1),i.signature=this.invoiceSignature,t.signature=this.invoiceSignature,i&&(i.addEventListener("click",function(){this.signature.clear()},!1),t.addEventListener("mouseup",e),t.addEventListener("touchend",e),t.addEventListener("pointerup",e))}onCloseButtonClick(){this._controller.router.go("dashboard",{historyUpdate:"replace"})}onSubmitButtonClick(){this.copySignatureCanvasToPrintableElementAsImage(),this.insertPageBreaks(this.printableForm),this.generatePDF()}copySignatureCanvasToPrintableElementAsImage(){let t=document.getElementById(this.printableCanvasID).getContext("2d");t.scale(.5,.5),t.canvas.width=450,t.canvas.height=300,t.drawImage(document.getElementById(this.canvasID),0,0)}insertPageBreaks(t,e=0,i=0){const r=t.children,n=2===i;let l=Number(e);return[...r].forEach(t=>{const e=0===i?t.offsetHeight:o.offsetHeightWithMargin(t),r=l+e;a.isExceedPageHeight(e)&&!n?l=this.insertPageBreaks(t,l,i+1):a.isExceedPageHeight(r)&&!n?l=this.insertPageBreaks(t,l,i+1):a.isExceedPageHeight(r)&&n?(o.insertHTMLBeforeElement(s,t),l=a.remainingPageHeight(e)):l=a.remainingPageHeight(r)}),l}generatePDF(){html2pdf().from(this.printableForm).set(l).outputPdf("blob").then(t=>{this.saveForm(new Blob([t],{type:"application/pdf"}))})}saveForm(t){this.setActivityModelInvoice(t),this.invoiceSignature.isEmpty()||this.setActivityModelSignature(this.invoiceSignature.getDataString()),this._controller.submitPluginData()}setActivityModelInvoice(t){this._activityModel.set("invoice",{fileName:this.fileName,fileContents:t})}setActivityModelSignature(t){this._activityModel.set("csign",t)}}}});
define('viewModels/service-checklist',["knockout","utils/dom","ojs/ojarraydataprovider","ojs/ojlistview","ojs/ojbutton"],function(t,e,i){return function(){return new class{listallAssets(e){var s=1;this.allAssetData=[];const a=e.inventoryList;console;for(const[t,i]of Object.entries(a)){var n=null!=e.activity.masterActivityId?e.activity.masterActivityId:"";if("customer"==i.invpool&&i.inv_aid==e.activity.aid||"customer"==i.invpool&&i.inv_aid==n){i.invId,i.osc_asset_id,null!=i.inv_capacity&&i.inv_capacity.length>0&&i.inv_capacity;var o=null!=i.model_name&&i.model_name.length>0?i.model_name:"",l=(null!=e.activity.activity_organization&&e.activity.activity_organization.length>0&&e.activity.activity_organization,null!=i.inv_floor&&i.inv_floor.length>0?i.inv_floor:"NA"),r=null!=i.inv_room&&i.inv_room.length>0?i.inv_room:"NA",c=null!=i.inv_block&&i.inv_block.length>0?i.inv_block:"NA",v=null!=i.inv_type&&i.inv_type.length>0?i.inv_type:"",_=(null!=i.inv_visitNumber&&i.inv_visitNumber.length>0&&i.inv_visitNumber,null!=i.inv_number&&i.inv_number.length>0?i.inv_number:"NA"),h=null!=i.invsn&&i.invsn.length>0?i.invsn:"",u=null!=i.issue_type&&i.issue_type.length>0?i.issue_type:"NA",y=null!=i.inv_service_type&&i.inv_service_type.length>0?i.inv_service_type:"NA",m=null!=i.asset_remarks&&i.asset_remarks.length>0?i.asset_remarks:"NA",d=null!=i.warranty&&i.warranty.length>0?i.warranty:"NA";d="yes"==d?"Active":"Expired",1!=i.asset_verified?this.assetClass="demo-centering-box-red":1!=i.service_checklist_completed?this.assetClass="demo-centering-box-yellow":this.assetClass="demo-centering-box-green",0==this.allAssetData.length?this.allAssetData=[{model:o,serialNo:h,wStatus:d,block:c,floor:l,room:r,machineNo:_,assetType:v,issueType:u,serviceType:y,remarks:m,count:s}]:this.allAssetData.push({model:o,serialNo:h,wStatus:d,block:c,floor:l,room:r,machineNo:_,assetType:v,issueType:u,serviceType:y,remarks:m,count:s}),s++}}"Preventive Maintenance"!=e.activity.aworktype&&(this.allAssetsDataProvider=t.observable(new i(this.allAssetData,{keyAttributes:"serialNo"})))}handleActivated(e){this._controller=e.valueAccessor().params.app,this.ofscData=this._controller.openData(),console.log(this.ofscData),this.count=t.observable(),this.listallAssets(this.ofscData),this.assetData=[{account:null!=this.ofscData.activity.activity_organization&&this.ofscData.activity.activity_organization.length>0?this.ofscData.activity.activity_organization:"",site:null!=this.ofscData.activity.caddress&&this.ofscData.activity.caddress.length>0?this.ofscData.activity.caddress:"",refno:null!=this.ofscData.activity.reference_number&&this.ofscData.activity.reference_number.length>0?this.ofscData.activity.reference_number:""}],this.assetDataProvider=t.observable(new i(this.assetData,{keyAttributes:"account"}))}dismiss(){this._controller.router.go("dashboard",{historyUpdate:"replace"})}}}});

define('text!views/service-checklist.html',[],function () { return '<!--\r\nOracle Field Service Debriefing plugin\r\n\r\nCopyright (c) 2023, Oracle and/or its affiliates.\r\nLicensed under the Universal Permissive License v 1.0 as shown at https://oss.oracle.com/licenses/upl/\r\n-->\r\n<div class="oj-flex oj-md-padding-4x-vertical plugin-main-container charges-main-container">\r\n  <div class="oj-sm-12 oj-flex-item oj-sm-padding-2x-horizontal">\r\n    <h3>Service Checklist</h3>\r\n\r\n    <div class="oj-sm-padding-2x-vertical oj-panel demo-myouterpanel">\r\n      <!-- Asset header Section-->\r\n      <div class="oj-sm-padding-2x-vertical oj-panel demo-mypanel">\r\n        <div class="demo-flex-display">\r\n          <div class="">\r\n            <oj-list-view\r\n              id="listview"\r\n              aria-label="service-checklist_1"\r\n              data="[[assetDataProvider]]"\r\n              class="oj-listview-full-width"\r\n              display="list"\r\n            >\r\n              <template slot="itemTemplate" data-oj-as="item">\r\n                <li>\r\n                  <oj-c-list-item-layout class="oj-flex oj-sm-flex-direction-column">\r\n                    <span\r\n                      slot="leading"\r\n                      class="oj-typography-body-md oj-text-color-primary oj-flex-item oj-sm-padding-2x-horizontal"\r\n                      ><oj-bind-text class="oj-typography-semi-bold">Account:</oj-bind-text>\r\n\r\n                      <oj-bind-text value="[[item.data.account]]"></oj-bind-text\r\n                    ></span>\r\n                    <span slot="leading" class="oj-typography-body-md oj-text-color-primary oj-sm-padding-2x-horizontal"\r\n                      ><oj-bind-text class="oj-typography-semi-bold">Site:</oj-bind-text>\r\n                      <oj-bind-text value="[[item.data.site]]"></oj-bind-text>\r\n                    </span>\r\n                    <span slot="leading" class="oj-typography-body-md oj-text-color-primary oj-sm-padding-2x-horizontal"\r\n                      ><oj-bind-text class="oj-typography-semi-bold">Reference Number:</oj-bind-text>\r\n                      <oj-bind-text value="[[item.data.refno]]"></oj-bind-text>\r\n                    </span>\r\n                  </oj-c-list-item-layout>\r\n                </li>\r\n              </template>\r\n            </oj-list-view>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <!--Main Section Part-->\r\n      <div class="oj-sm-padding-2x-vertical oj-panel demo-mypanel">\r\n        <div class="demo-flex-display">\r\n          <div class="oj-flex oj-sm-flex-items-initial">\r\n            <oj-list-view\r\n              id="mainSectionListView"\r\n              aria-label="service-checklist_2"\r\n              data="[[allAssetsDataProvider]]"\r\n              gridlines.item="visibleExceptLast"\r\n              class="oj-listview-full-width oj-sm-padding"\r\n              display="list"\r\n            >\r\n              <template slot="itemTemplate" data-oj-as="item">\r\n                <li>\r\n                  <oj-c-list-item-layout\r\n                    class="oj-flex oj-sm-flex-items-initial oj-sm-flex-wrap-nowrap oj-sm-padding-2x-horizontal oj-sm-padding-2x-vertical oj-lg-padding-2x-horizontal oj-lg-padding-2x-vertical oj-md-padding-2x-vertical oj-md-padding-2x-horizontal"\r\n                  >\r\n                    <div class="oj-flex-item oj-sm-horizontal oj-typography-semi-bold oj-sm-padding-2x-horizontal">\r\n                      <span :class="[[assetClass]]">\r\n                        <oj-bind-text value="[[item.data.count]]"></oj-bind-text>\r\n                      </span>\r\n                    </div>\r\n                    <div class="oj-flex oj-sm-flex-direction-column">\r\n                      <span\r\n                        slot="leading"\r\n                        class="oj-typography-body-sm oj-text-color-primary oj-flex-item oj-sm-padding-2x-horizontal"\r\n                        ><oj-bind-text class="oj-typography-semi-bold">Model:</oj-bind-text>\r\n\r\n                        <oj-bind-text value="[[item.data.model]]"></oj-bind-text\r\n                      ></span>\r\n                      <span\r\n                        slot="leading"\r\n                        class="oj-typography-body-sm oj-text-color-primary oj-sm-padding-2x-horizontal"\r\n                        ><oj-bind-text class="oj-typography-semi-bold">Serial No: </oj-bind-text>\r\n                        <oj-bind-text value="[[item.data.serialNo]]"></oj-bind-text>\r\n                      </span>\r\n                      <span\r\n                        slot="leading"\r\n                        class="oj-typography-body-sm oj-text-color-primary oj-sm-padding-2x-horizontal"\r\n                        ><oj-bind-text class="oj-typography-semi-bold">Warranty Status: </oj-bind-text>\r\n                        <oj-bind-text value="[[item.data.wStatus]]"></oj-bind-text>\r\n                      </span>\r\n                      <span class="oj-typography-body-sm oj-text-color-primary oj-flex-item oj-sm-padding-2x-horizontal"\r\n                        ><oj-bind-text class="oj-typography-semi-bold">Block: </oj-bind-text>\r\n\r\n                        <oj-bind-text value="[[item.data.block]]"></oj-bind-text\r\n                      ></span>\r\n                      <span class="oj-typography-body-sm oj-text-color-primary oj-sm-padding-2x-horizontal"\r\n                        ><oj-bind-text class="oj-typography-semi-bold">Floor: </oj-bind-text>\r\n                        <oj-bind-text value="[[item.data.floor]]"></oj-bind-text>\r\n                      </span>\r\n                      <span class="oj-typography-body-sm oj-text-color-primary oj-sm-padding-2x-horizontal"\r\n                        ><oj-bind-text class="oj-typography-semi-bold">Room:</oj-bind-text>\r\n                        <oj-bind-text value="[[item.data.room]]"></oj-bind-text>\r\n                      </span>\r\n                      <span class="oj-typography-body-sm oj-text-color-primary oj-flex-item oj-sm-padding-2x-horizontal"\r\n                        ><oj-bind-text class="oj-typography-semi-bold">Machine No: </oj-bind-text>\r\n\r\n                        <oj-bind-text value="[[item.data.machineNo]]"></oj-bind-text\r\n                      ></span>\r\n                      <span class="oj-typography-body-sm oj-text-color-primary oj-sm-padding-2x-horizontal"\r\n                        ><oj-bind-text class="oj-typography-semi-bold">Asset Type: </oj-bind-text>\r\n                        <oj-bind-text value="[[item.data.assetType]]"></oj-bind-text>\r\n                      </span>\r\n                      <span class="oj-typography-body-sm oj-text-color-primary oj-sm-padding-2x-horizontal"\r\n                        ><oj-bind-text class="oj-typography-semi-bold">Issue Type:</oj-bind-text>\r\n                        <oj-bind-text value="[[item.data.issueType]]"></oj-bind-text>\r\n                      </span>\r\n                      <span class="oj-typography-body-sm oj-text-color-primary oj-flex-item oj-sm-padding-2x-horizontal"\r\n                        ><oj-bind-text class="oj-typography-semi-bold">Service Type:</oj-bind-text>\r\n\r\n                        <oj-bind-text value="[[item.data.serviceType]]"></oj-bind-text\r\n                      ></span>\r\n                      <span class="oj-typography-body-sm oj-text-color-primary oj-sm-padding-2x-horizontal"\r\n                        ><oj-bind-text class="oj-typography-semi-bold">Remarks:</oj-bind-text>\r\n                        <oj-bind-text value="[[item.data.remarks]]"></oj-bind-text>\r\n                      </span>\r\n\r\n                      <div class="oj-flex oj-sm-flex-items-initial oj-sm-justify-center oj-sm-flex-wrap-nowrap">\r\n                        <div class="oj-flex-item">\r\n                          <oj-button class="oj-button-sm" chroming="danger">\r\n                            <span>\r\n                              <oj-bind-text>Asset Details</oj-bind-text>\r\n                            </span>\r\n                          </oj-button>\r\n                          <oj-button class="oj-button-sm" chroming="callToAction">\r\n                            <span>\r\n                              <oj-bind-text>Service Checklist</oj-bind-text>\r\n                            </span>\r\n                          </oj-button>\r\n                          <oj-button class="oj-button-sm" chroming="solid" display="icons">\r\n                            <span slot="startIcon" class="oj-ux-ico-clock-history"> </span>\r\n                            <oj-bind-text value="Service History"></oj-bind-text>\r\n                          </oj-button>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </oj-c-list-item-layout>\r\n                </li>\r\n              </template>\r\n            </oj-list-view>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n';});


define('text!views/add-expense.html',[],function () { return '<!--\nOracle Field Service Debriefing plugin\n\nCopyright (c) 2023, Oracle and/or its affiliates.\nLicensed under the Universal Permissive License v 1.0 as shown at https://oss.oracle.com/licenses/upl/\n-->\n\n<div class="oj-flex oj-padding-top oj-md-padding-4x-vertical plugin-main-container charges-main-container">\n    <div class="oj-sm-12 oj-flex-item oj-sm-padding-2x-horizontal">\n\n        <h3>Add Expenses</h3>\n        <oj-validation-group id="tracker">\n            <oj-combobox-one class="input-wide margin-top-16x"\n                             id="activity"\n                             label-hint="Billing Type"\n                             messages-custom="[[selectMessagesCustomBillingType]]"\n                             required="true"\n                             value="{{activityId}}">\n                <oj-bind-for-each data="[[activityEnumArray]]">\n                    <template>\n                        <oj-option value="[[$current.data.value]]">\n                            <oj-bind-text value="[[$current.data.label]]"></oj-bind-text>\n                        </oj-option>\n                    </template>\n                </oj-bind-for-each>\n            </oj-combobox-one>\n\n            <oj-combobox-one class="input-wide margin-top-16x"\n                             id="laborItem"\n                             label-hint="Billing Item"\n                             messages-custom="[[selectMessagesCustomBillingItem]]"\n                             required="true"\n                             value="{{expenseItemId}}">\n                <oj-bind-for-each data="[[expenseItemEnumArray]]">\n                    <template>\n                        <oj-option value="[[$current.data.value]]">\n                            <oj-bind-text value="[[$current.data.label]]"></oj-bind-text>\n                        </oj-option>\n                    </template>\n                </oj-bind-for-each>\n            </oj-combobox-one>\n\n            <oj-input-number class="input-wide margin-top-16x"\n                             id="amount"\n                             label-hint="Amount"\n                             min="0"\n                             required="true"\n                             step="0.01"\n                             value="{{amount}}">\n            </oj-input-number>\n\n            <div class="oj-flex margin-top-16x">\n\n                <oj-label class="oj-text-color-secondary charges-description"\n                          for="itemDescription">\n                    Description\n                </oj-label>\n\n                <oj-input-text\n                        id="itemDescription"\n                        readonly="true"\n                        value="[[expenseItemDescription]]">\n                </oj-input-text>\n\n            </div>\n\n\n            <oj-combobox-one class="input-wide margin-top-16x"\n                             id="currency"\n                             label-hint="Currency"\n                             messages-custom="[[selectMessagesCustomCurrency]]"\n                             required="true"\n                             value="{{currencyKey}}">\n                <oj-bind-for-each data="[[expenseCurrencyEnumArray]]">\n                    <template>\n                        <oj-option value="[[$current.data.value]]">\n                            <oj-bind-text value="[[$current.data.label]]"></oj-bind-text>\n                        </oj-option>\n                    </template>\n                </oj-bind-for-each>\n            </oj-combobox-one>\n        </oj-validation-group>\n\n        <div class="screen-actions oj-margin-vertical">\n            <oj-button chroming="outlined" class="padding-all-16x margin-bottom-16px margin-top-40px"\n                       on-click=\'[[dispose.bind($data)]]\'>Cancel\n            </oj-button>\n            <oj-button chroming="callToAction"\n                       class="charges-screen-button padding-all-16x margin-bottom-16px margin-top-40px"\n                       on-click="[[submit.bind($data)]]">Submit\n            </oj-button>\n        </div>\n\n    </div>\n</div>\n\n';});


define('text!views/add-labor.html',[],function () { return '<!--\nOracle Field Service Debriefing plugin\n\nCopyright (c) 2023, Oracle and/or its affiliates.\nLicensed under the Universal Permissive License v 1.0 as shown at https://oss.oracle.com/licenses/upl/\n-->\n\n<div class="oj-flex oj-padding-top oj-md-padding-4x-vertical plugin-main-container charges-main-container">\n    <div class="oj-sm-12 oj-flex-item oj-sm-padding-2x-horizontal">\n        <div id="form-container">\n            <h3>Add Labor</h3>\n            <oj-validation-group id="tracker">\n                <div>\n                    <oj-combobox-one class="input-wide margin-top-16x"\n                                     data="[[activityEnumArray]]"\n                                     id="activity"\n                                     label-hint="Billing Type"\n                                     messages-custom="[[selectMessagesCustomBillingType]]"\n                                     required="true"\n                                     value="{{activityId}}">\n                        <oj-bind-for-each data="[[activityEnumArray]]">\n                            <template>\n                                <oj-option value="[[$current.data.value]]">\n                                    <oj-bind-text value="[[$current.data.label]]"></oj-bind-text>\n                                </oj-option>\n                            </template>\n                        </oj-bind-for-each>\n                    </oj-combobox-one>\n                </div>\n\n                <div>\n                    <oj-combobox-one\n                            class="input-wide margin-top-16x"\n                            data="[[laborItemEnumArray]]"\n                            id="laborItem"\n                            label-hint="Billing Item"\n                            messages-custom="[[selectMessagesCustomBillingItem]]"\n                            required="true"\n                            value="{{laborItemId}}">\n                        <oj-bind-for-each data="[[laborItemEnumArray]]">\n                            <template>\n                                <oj-option value="[[$current.data.value]]">\n                                    <oj-bind-text value="[[$current.data.label]]"></oj-bind-text>\n                                </oj-option>\n                            </template>\n                        </oj-bind-for-each>\n                    </oj-combobox-one>\n                </div>\n\n                <div class="oj-flex margin-top-16x">\n                    <oj-label class="oj-text-color-secondary charges-description"\n                              for="itemDescription">\n                        Description\n                    </oj-label>\n                    <oj-input-text id="itemDescription"\n                                   readonly="true"\n                                   value="[[laborItemDescription]]">\n                    </oj-input-text>\n                </div>\n\n                <div>\n                <span class="oj-flex-labor-time margin-top-16x">\n                    <oj-input-time id="startTimeEl"\n                                   label-hint="Start Time"\n                                   on-valid-changed=\'[[onStartTimeValidChanged]]\'\n                                   required="true"\n                                   time-picker=\'{ "timeIncrement":"00:01:00:00" }\'\n                                   value={{startTime}}>\n                    </oj-input-time>\n                    <oj-input-time id="endTimeEl"\n                                   label-hint="End Time"\n                                   messages-custom="{{appMessages}}"\n                                   on-valid-changed=\'[[onEndTimeValidChanged]]\'\n                                   required="true"\n                                   time-picker=\'{ "timeIncrement":"00:01:00:00" }\'\n                                   validators="[[[durationValidator]]]"\n                                   value={{endTime}}>\n                    </oj-input-time>\n                </span>\n                </div>\n\n\n                <div class="oj-flex oj-duration" data-bind="visible: durationHours() !== \'\'">\n                    <div class="oj-flex-item oj-text-color-secondary">\n                        <oj-label class="oj-duration oj-text-color-secondary" for="durationHours">Duration (hrs)\n                        </oj-label>\n                        <oj-input-text id="durationHours" readonly value="[[durationHours]]"></oj-input-text>\n                    </div>\n                </div>\n\n\n            </oj-validation-group>\n        </div>\n\n        <div class="screen-actions oj-margin-vertical">\n            <oj-button chroming="outlined" class="padding-all-16x margin-bottom-16px margin-top-40px"\n                       on-click=\'[[onCloseButtonClick.bind($data)]]\'>Cancel\n            </oj-button>\n            <oj-button chroming="callToAction"\n                       class="charges-screen-button padding-all-16x margin-bottom-16px margin-top-40px"\n                       disabled="[[isSubmitDisabled]]" id="addItemBtn"\n                       on-click="[[addLabor.bind($data, { activityId: \'1\', itemId: \'1\', startTime: \'10\', endTime: \'20\', duration: \'1h\' })]]">\n                Submit\n            </oj-button>\n        </div>\n\n    </div>\n\n</div>';});


define('text!views/add-returned-part.html',[],function () { return '<!--\nOracle Field Service Debriefing plugin\n\nCopyright (c) 2023, Oracle and/or its affiliates.\nLicensed under the Universal Permissive License v 1.0 as shown at https://oss.oracle.com/licenses/upl/\n-->\n\n<div class="oj-flex oj-padding-top oj-md-padding-4x-vertical plugin-main-container charges-main-container">\n\n    <div class="oj-sm-12 oj-flex-item oj-sm-padding-2x-horizontal">\n\n        <h3> Return Part </h3>\n\n        <oj-validation-group id="tracker">\n\n            <!-- ko if: !selectedInventory() -->\n            <!-- ko if: !isSearchByPartsCatalog() && inventoriesDataProvider.isEmpty() != \'yes\'-->\n\n            <oj-list-view class="oj-margin-top dashboard-list margin-top-16x"\n                          data="[[inventoriesDataProvider]]"\n                          selection="{{listViewSelection}}"\n                          selection-mode="single">\n                <template slot=\'itemTemplate\'>\n                    <div class="oj-flex">\n                        <div class="oj-flex-item">\n                            <div>\n                                <span class="oj-text-md oj-text-primary-color"\n                                      data-bind="text: $current.data.inventory.get(\'part_item_number_rev\')"></span>\n                            </div>\n                            <div class="oj-text-sm oj-text-secondary-color">\n                                <span data-bind="text: $current.data.inventory.get(\'part_item_desc\')"></span>\n                            </div>\n                            <div class="oj-text-xs oj-text-tertiary-color"\n                                 data-bind="if: $current.data.dispositionText">\n                                <span data-bind="text: $current.data.dispositionText"></span>\n                            </div>\n                        </div>\n                        <div class="oj-flex-item oj-sm-flex-initial">\n                            <span class="oj-text-md oj-text-tertiary-color"\n                                  data-bind="text: $current.data.measuredQuantity"></span>\n                        </div>\n                    </div>\n                </template>\n            </oj-list-view>\n            <div class="oj-padding-lg-top oj-flex oj-flex-items-pad margin-top-16x">\n                <oj-button on-click="[[searchAtPartsCatalog.bind($data)]]">Search at Parts Catalog</oj-button>\n            </div>\n\n            <!-- /ko -->\n            <!-- ko if: inventoriesDataProvider.isEmpty() == \'yes\' || isSearchByPartsCatalog() -->\n\n            <div class="margin-top-16x oj-flex">\n                <div class="oj-flex-item oj-sm-12">\n                    <oj-input-search class="search-parts-catalog"\n                                     placeholder="Search Parts Catalog"\n                                     value="{{searchRequest}}">\n                    </oj-input-search>\n                </div>\n            </div>\n            <div data-bind="visible: showSearchResults">\n                <div class="no-results" data-bind="visible: noResults">\n                    <div class="no-results-icon"></div>\n                    <div class="text">No parts found</div>\n                </div>\n                <div class="search-results" data-bind="visible: searchResultItems().length">\n                    <div data-bind="foreach: { data: searchResultItems, as: \'item\'}">\n                        <div>\n                            <part-preview params="\n                            model: item,\n                            catalogCollection: $parent.catalogCollection,\n                            onOpenDetails: $parent.partSelected.bind($parent),\n                            searchRequest: $parent.searchRequestFiltered">\n                            </part-preview>\n                        </div>\n                    </div>\n                    <div class="oj-flex">\n                        <div class="oj-flex-item">\n\n                            <oj-button data-bind="visible: isSearchContinueAvailable && searchResultItems().length > 1"\n                                       disabled="[[searchContinueLoading]]"\n                                       on-click="[[continueSearch.bind($data)]]">More...\n                            </oj-button>\n\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n            <!-- /ko -->\n            <!-- /ko -->\n\n            <!-- ko if: selectedInventory -->\n\n            <div class="oj-flex margin-top-16x">\n                <div class="oj-flex-item">\n                    <div>\n                        <span class="oj-text-md oj-text-primary-color"\n                              data-bind="text: selectedInventory().inventory.get(\'part_item_number_rev\')"></span>\n                    </div>\n                    <div class="oj-text-sm oj-text-secondary-color">\n                        <span data-bind="text: selectedInventory().inventory.get(\'part_item_desc\')"></span>\n                    </div>\n                    <div class="oj-text-xs oj-text-tertiary-color" data-bind="if: selectedInventory().dispositionText">\n                        <span data-bind="text: selectedInventory().dispositionText"></span>\n                    </div>\n                </div>\n                <div class="oj-flex-item oj-sm-flex-initial">\n                    <span class="oj-text-md oj-text-tertiary-color"\n                          data-bind="text: selectedInventory().measuredQuantity"></span>\n                </div>\n            </div>\n            <div class="oj-form oj-sm-odd-cols-12 oj-md-odd-cols-4 oj-md-labels-inline oj-margin-lg-top"\n                 style="padding-top: 20px;">\n\n                <oj-combobox-one class="input-wide margin-top-16x"\n                                 data="[[activityEnumArray]]"\n                                 id="activity"\n                                 label-hint="Billing Type"\n                                 messages-custom="[[selectMessagesCustomBillingType]]"\n                                 required="true"\n                                 value="{{activityId}}">\n                    <oj-bind-for-each data="[[activityEnumArray]]">\n                        <template>\n                            <oj-option value="[[$current.data.value]]">\n                                <oj-bind-text value="[[$current.data.label]]"></oj-bind-text>\n                            </oj-option>\n                        </template>\n                    </oj-bind-for-each>\n                </oj-combobox-one>\n\n                <oj-input-text class="input-wide"\n                               help.instruction="Serialized items will always have quantity as 1."\n                               id="serialNum"\n                               label-hint="Serial Number"\n                               value="{{serialNum}}">\n                </oj-input-text>\n\n                <oj-input-number class="input-wide margin-top-16x"\n                                 disabled="{{isSerialized}}"\n                                 id="quantity"\n                                 label-hint="Quantity"\n                                 min="1"\n                                 required="true"\n                                 step="1"\n                                 value="{{quantity}}">\n                </oj-input-number>\n\n            </div>\n\n\n            <!-- /ko -->\n        </oj-validation-group>\n        <div class="screen-actions oj-margin-vertical">\n            <oj-button chroming="outlined"\n                       class="charges-screen-button padding-all-16x margin-bottom-16px margin-top-40px"\n                       on-click=\'[[dismiss.bind($data)]]\'>Back\n            </oj-button>\n            <oj-button chroming="callToAction"\n                       class="charges-screen-button margin-left-16x padding-all-16x margin-bottom-16px margin-top-40px"\n                       data-bind="visible: selectedInventory"\n                       on-click="[[submit.bind($data)]]">Submit\n            </oj-button>\n        </div>\n\n    </div>\n</div>\n';});


define('text!views/add-used-part.html',[],function () { return '<!--\nOracle Field Service Debriefing plugin\n\nCopyright (c) 2023, Oracle and/or its affiliates.\nLicensed under the Universal Permissive License v 1.0 as shown at https://oss.oracle.com/licenses/upl/\n-->\n<div class="oj-flex oj-padding-top oj-md-padding-4x-vertical plugin-main-container charges-main-container">\n\n    <div class="oj-sm-12 oj-flex-item oj-sm-padding-2x-horizontal">\n\n        <h3> Add Part </h3>\n\n        <oj-validation-group id="tracker">\n            <!-- ko if: !selectedInventory() -->\n\n            <div class="oj-flex padding-all-16x margin-top-16x">\n                <div class="oj-flex-item">\n                    <oj-input-search class="search-parts-catalog"\n                                     placeholder="Search Part"\n                                     value="{{searchSubstring}}">\n                    </oj-input-search>\n                </div>\n            </div>\n\n            <oj-list-view class="oj-margin-top dashboard-list" data="[[searchResultsDataProvider]]"\n                          data-bind="visible: !searchSubstringIsEmpty()" selection="{{listViewSelection}}"\n                          selection-mode="single">\n                <template slot=\'itemTemplate\'>\n                    <div class="oj-flex">\n                        <div class="oj-flex-item">\n                            <div>\n                                <span class="oj-text-md oj-text-primary-color"\n                                      data-bind="textHighlighted: $current.data.inventory.get(\'part_item_number_rev\'), searchString: searchSubstringDebounced"\n                                      data-bind="text: $current.data.measuredQuantity">\n                                </span>\n                            </div>\n                            <div class="oj-text-xs oj-text-tertiary-color" data-bind="if: $current.data.invsn">\n                                <span data-bind="text: $current.data.invsn"></span>\n                            </div>\n                            <div class="oj-text-sm oj-text-secondary-color">\n                                <span data-bind="textHighlighted: $current.data.inventory.get(\'part_item_desc\'), searchString: searchSubstringDebounced"></span>\n                            </div>\n                            <div class="oj-text-xs oj-text-tertiary-color"\n                                 data-bind="if: $current.data.dispositionText">\n                                <span data-bind="text: $current.data.dispositionText"></span>\n                            </div>\n                        </div>\n                    </div>\n                </template>\n            </oj-list-view>\n\n            <!-- /ko -->\n\n            <!-- ko if: selectedInventory -->\n\n            <div class="padding-all-16x margin-top-16x">\n                <div class="oj-flex">\n                    <div class="oj-flex-item">\n                        <div class="oj-text-md oj-text-primary-color">\n                            <span data-bind="text: selectedInventory().inventory.get(\'part_item_number_rev\')"></span>\n                            <span data-bind="text: selectedInventory().measuredQuantity" style="float:right"></span>\n                        </div>\n                        <div class="oj-text-sm oj-text-secondary-color">\n                            <span data-bind="text: selectedInventory().inventory.get(\'part_item_desc\')"></span>\n                        </div>\n                        <div class="oj-text-xs oj-text-tertiary-color"\n                             data-bind="if: selectedInventory().dispositionText">\n                            <span data-bind="text: selectedInventory().dispositionText"></span>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div class="oj-form margin-top-16x oj-md-labels-inline padding-all-16x">\n                <div class="oj-flex">\n                    <div class="oj-flex-item margin-top-16x">\n                        <oj-combobox-one data="[[activityEnumArray]]"\n                                         id="activity"\n                                         label-hint="Billing Type"\n                                         messages-custom="[[selectMessagesCustomBillingType]]"\n                                         required="true"\n                                         value="{{activityId}}">\n                            <oj-bind-for-each data="[[activityEnumArray]]">\n                                <template>\n                                    <oj-option value="[[$current.data.value]]">\n                                        <oj-bind-text value="[[$current.data.label]]"></oj-bind-text>\n                                    </oj-option>\n                                </template>\n                            </oj-bind-for-each>\n                        </oj-combobox-one>\n                    </div>\n                </div>\n\n                <oj-bind-if test="[[selectedInventory().inventory.get(\'invtype\') == invTypePart]]">\n                    <div class="oj-flex">\n                        <div class="oj-flex-item margin-top-16x padding-all-16x">\n                            <oj-input-number class="input-wide"\n                                             id="quantity"\n                                             label-hint="Quantity"\n                                             min="1"\n                                             required="true"\n                                             step="1"\n                                             value="{{quantity}}">\n                            </oj-input-number>\n                        </div>\n                    </div>\n                </oj-bind-if>\n                <oj-bind-if test="[[selectedInventory().inventory.get(\'invtype\') == invTypePartSN]]">\n                    <div class="oj-form oj-md-labels-inline">\n                        <oj-combobox-one class="input-wide margin-top-16x"\n                                         data="[[invSerialNumArray]]"\n                                         id="serialnum"\n                                         label-hint="Serial Number"\n                                         messages-custom="[[selectMessagesCustomSerial]]"\n                                         required="true"\n                                         value="{{serialNum}}">\n                            <oj-bind-for-each data="[[invSerialNumArray]]">\n                                <template>\n                                    <oj-option value="[[$current.data.value]]">\n                                        <oj-bind-text value="[[$current.data.label]]"></oj-bind-text>\n                                    </oj-option>\n                                </template>\n                            </oj-bind-for-each>\n                        </oj-combobox-one>\n                    </div>\n                </oj-bind-if>\n            </div>\n\n\n            <!-- /ko -->\n        </oj-validation-group>\n        <div class="screen-actions oj-margin-vertical">\n            <oj-button chroming="outlined" class="padding-all-16x margin-bottom-16px margin-top-40px"\n                       on-click=\'[[dismiss.bind($data)]]\'>Back\n            </oj-button>\n            <oj-button chroming="callToAction" class="padding-all-16x margin-bottom-16px margin-top-40px"\n                       class="oj-button-primary" data-bind="visible: selectedInventory"\n                       on-click="[[submit.bind($data)]]">Submit\n            </oj-button>\n        </div>\n\n    </div>\n</div>\n';});


define('text!views/dashboard.html',[],function () { return '<!--\nOracle Field Service Debriefing plugin\n\nCopyright (c) 2023, Oracle and/or its affiliates.\nLicensed under the Universal Permissive License v 1.0 as shown at https://oss.oracle.com/licenses/upl/\n-->\n\n    <div id="emptyDashboard-container" class="plugin-main-container dashboard-flex-styles empty-dashboard" data-bind="visible: !emptyDashboard()">\n        <span class="icon-time-spent"></span>\n        <h2 class="oj-flex-bar oj-sm-align-items-center sm-screen message-style">Please report your service summary</h2>\n        <span class="margin-top-8x"><oj-bind-text>You can add Labor Hours, Expense Charges, Installed Parts and Part Returns details</oj-bind-text></span>\n        <oj-menu-button id="menuButton1" chroming="outlined" class="margin-top-16x">\n            Add Charges\n            <oj-menu id="debriefMenu1" slot="menu" on-oj-menu-action="[[menuItemAction]]">\n                <oj-option id="iconFont5" value="labor">Labor</oj-option>\n                <oj-option id="iconFont6" value="expenses">Expenses</oj-option>\n                <oj-option id="iconFont7" value="addParts">Add Parts</oj-option>\n                <oj-option id="iconFont8" value="returnParts">Return Parts</oj-option>\n                <oj-option id="iconFont8" value="serviceChecklist">Service CheckList</oj-option>\n            </oj-menu>\n        </oj-menu-button>\n\n    </div>\n    <div data-bind="visible: emptyDashboard()" class="dashboard-flex-styles">\n        <div class="oj-sm-float-end oj-datagrid-popup-footer add-charge-button">\n            <oj-menu-button id="menuButton2" chroming="outlined">\n                Add Charges\n                <oj-menu id="debriefMenu2" slot="menu" on-oj-menu-action="[[menuItemAction]]">\n                    <oj-option id="iconFont51" value="labor">Labor</oj-option>\n                    <oj-option id="iconFont61" value="expenses">Expenses</oj-option>\n                    <oj-option id="iconFont71" value="addParts">Add Parts</oj-option>\n                    <oj-option id="iconFont81" value="returnParts">Return Parts</oj-option>\n                    <oj-option id="iconFont8" value="serviceChecklist">Service CheckList</oj-option> \n                </oj-menu>\n            </oj-menu-button>\n        </div>\n        <div class="oj-flex plugin-main-container">\n            <oj-dialog id="modalDialog" class="outbound-dialog min-height-body" cancel-behavior="none" drag-affordance="none" aria-describedby="desc">\n                <div class="oj-sm-flex-wrap-nowrap oj-flex" slot="header">\n                    <div class="oj-flex oj-sm-align-items-flex-start oj-sm-flex-wrap-nowrap oj-sm-justify-content-space-around oj-flex-item oj-sm-flex-initial">\n                        <oj-bind-text class="oj-flex-item oj-sm-flex-initial outbound-dialog-header">\n                            <oj-bind-text value="[[ dialogHeading ]]"></oj-bind-text>\n                        </oj-bind-text>\n                    </div>\n                </div>\n                <div slot="footer">\n                    <div class="outbound-form-footer">\n                        <div>\n                            <oj-button id="cancelButton" on-oj-action="[[closeDialog]]">Cancel</oj-button>\n                            <oj-button :id="[[currentItemId]]" chroming="callToAction"\n                                on-oj-action="[[deleteSelectedItem.bind($data)]]">\n                                Remove\n                            </oj-button>\n                        </div>\n                    </div>\n                </div>\n            </oj-dialog>\n        \n            <div class="oj-flex-item oj-xl-web-padding-start dashboard-main-content-padding">\n                <!-- Time and Labor -->\n                <h3 class="oj-flex-bar oj-sm-align-items-center custom-font-style">\n                    <div class="oj-flex-item">Labor</div>\n                </h3>\n                <oj-list-view data="[[laborDataProvider]]" aria-label="Labor" class="dashboard-list" gridlines.item="visibleExceptLast" selection-mode ="none" item.focusable = "false">\n                    <template slot="itemTemplate" data-oj-as="item">\n                        <oj-list-item-layout>\n                            <div class="oj-flex flex-no-wrap">\n                                <div class="oj-flex-item">\n                                    <div>\n                                        <span class="name">\n                                            <oj-bind-text value="[[item.data.item_label]]"></oj-bind-text>\n                                        </span>\n                                    </div>\n                                    <div>\n                                        <span class="oj-typography-body-xs oj-text-color-secondary">\n                                            <oj-bind-text value="[[item.data.item_text]]"></oj-bind-text>\n                                        </span>\n                                    </div>\n                                    <div>\n                                        <span class="oj-typography-body-xs oj-text-color-secondary">\n                                            <oj-bind-text value="[[item.data.activity_text]]"></oj-bind-text>\n                                        </span>\n                                    </div>\n                                </div>\n                                <div class="oj-flex-item oj-sm-flex-initial dashboard-min-width">\n                                    <span class="oj-text-md oj-text-color-secondary">\n                                        <oj-bind-text value="[[formatDuration(item.data.duration)]]"></oj-bind-text>\n                                    </span>\n                                </div>\n                                <div class="delete-button-spacing">\n                                    <oj-button aria-label="delete" chroming="borderless" :id="[[item.data.id + \',labor\']]" on-oj-action="[[ openDialog.bind($data, \'labor\') ]]" display="icons">\n                                        <span slot="startIcon" class="delete-image"></span>\n                                    </oj-button>\n                                </div>\n                            </div>\n                        </oj-list-item-layout>\n                    </template>\n                </oj-list-view>\n            \n                \n                <!-- Expenses -->\n                <h3 class="oj-flex-bar oj-sm-align-items-center custom-font-style">\n                    <div class="oj-flex-item">Expenses</div>\n                </h3>\n                <oj-list-view data="[[expenseDataProvider]]" aria-label="Expenses" class="dashboard-list" gridlines.item="visibleExceptLast" selection-mode ="none" item.focusable = "false">\n                    <template slot="itemTemplate" data-oj-as="item">\n                        <oj-list-item-layout>\n                            <div class="oj-flex flex-no-wrap" >\n                                <div class="oj-flex-item">\n                                    <div>\n                                        <span class="name">\n                                            <oj-bind-text value="[[item.data.item_label]]"></oj-bind-text>\n                                        </span>\n                                    </div>\n                                    <div>\n                                        <span class="oj-typography-body-xs oj-text-color-secondary">\n                                            <oj-bind-text value="[[item.data.item_text]]"></oj-bind-text>\n                                        </span>\n                                    </div>\n                                    <div>\n                                        <span class="oj-typography-body-xs oj-text-color-secondary">\n                                            <oj-bind-text value="[[item.data.activity_text]]"></oj-bind-text>\n                                        </span>\n                                    </div>\n                                </div>\n                                <div class="oj-flex-item oj-sm-flex-initial dashboard-min-width">\n                                    <span class="oj-text-md oj-text-color-secondary">\n                                        <oj-bind-text value="[[item.data.currency_sign]]"></oj-bind-text> \n                                    </span>\n                                    <span class="oj-text-md oj-text-color-secondary">\n                                        <oj-bind-text value="[[item.data.amount]]"></oj-bind-text>\n                                    </span>\n                                </div>\n                                <div class="delete-button-spacing">\n                                    <oj-button aria-label="delete" chroming="borderless" :id="[[item.data.id + \',expenses\']]" on-oj-action="[[ openDialog.bind($data, \'expenses\') ]]" display="icons">\n                                        <span slot="startIcon" class="delete-image"></span>\n                                    </oj-button>\n                                </div>\n                            </div>\n                        </oj-list-item-layout>\n                    </template>\n                </oj-list-view>\n\n                <!-- Added Parts -->\n                <h3 class="oj-flex-bar oj-sm-align-items-center custom-font-style">\n                    <div class="oj-flex-item">Added Parts</div>\n                </h3>\n                <oj-list-view data="[[usedPartsDataSource]]" aria-label="Added Parts" class="oj-list-view--margin dashboard-list listview-container-overflow"\n                              selection-mode ="none" item.focusable = "false">\n                    <template slot="itemTemplate" data-oj-as="item">\n                        <oj-list-item-layout>\n                            <div class="oj-flex flex-no-wrap">\n                                <div class="oj-flex-item">\n                                    <div>\n                                        <span class="oj-text-md oj-text-color-primary">\n                                            <oj-bind-text value="[[item.data.inventory.get(\'part_item_number_rev\')]]"></oj-bind-text>\n                                        </span>\n                                    </div>\n                                    <div class="oj-typography-body-sm oj-text-color-secondary" data-bind="if: item.data.inventory.get(\'invsn\')">\n                                        <oj-bind-text value="[[item.data.inventory.get(\'invsn\')]]"></oj-bind-text>\n                                    </div>\n                                    <div class="oj-typography-body-sm oj-text-color-secondary">\n                                        <oj-bind-text value="[[item.data.inventory.get(\'part_item_desc\')]]"></oj-bind-text>\n                                    </div>\n                                    <div class="oj-typography-body-sm oj-text-color-secondary">\n                                        <oj-bind-text value="[[item.data.serviceActivityUsed]]"></oj-bind-text>\n                                    </div>\n                                </div>\n                                <div class="oj-flex-item oj-sm-flex-initial dashboard-min-width">\n                                    <span class="oj-text-md oj-text-color-secondary">\n                                        <oj-bind-text value="[[item.data.measuredQuantity]]"></oj-bind-text>\n                                    </span>\n                                </div>\n                                <div class="delete-button-spacing">\n                                    <oj-button aria-label="delete" chroming="borderless" :id="[[item.data.id + \',usedParts\']]" on-oj-action="[[ openDialog.bind($data, \'usedParts\') ]]" display="icons">\n                                        <span slot="startIcon" class="delete-image"></span>\n                                    </oj-button>\n                                </div>\n                            </div>\n                        </oj-list-item-layout>\n                    </template>\n                </oj-list-view>\n    \n    \n                <!-- Returned Parts -->\n                <h3 class="oj-flex-bar oj-sm-align-items-center custom-font-style">\n                    <div class="oj-flex-item">Returned Parts</div>\n                </h3>\n                <oj-list-view data="[[returnedPartsDataSource]]" aria-label="Returned Parts" class="dashboard-list listview-container-overflow">\n                    <template slot="itemTemplate" data-oj-as="item">\n                        <oj-list-item-layout> \n                            <div class="oj-flex flex-no-wrap" >\n                                <div class="oj-flex-item">\n                                    <div>\n                                        <span class="oj-text-md oj-text-color-primary">\n                                            <oj-bind-text value="[[item.data.inventory.get(\'part_item_number_rev\')]]"></oj-bind-text>\n                                        </span>\n                                    </div>\n                                    <div class="oj-typography-body-sm oj-text-color-secondary" data-bind="if: item.data.inventory.get(\'invsn\')">\n                                        <oj-bind-text value="[[item.data.inventory.get(\'invsn\')]]"></oj-bind-text>\n                                    </div>\n                                    <div class="oj-typography-body-sm oj-text-color-secondary">\n                                        <oj-bind-text value="[[item.data.inventory.get(\'part_item_desc\')]]"></oj-bind-text>\n                                    </div>\n                                    <div class="oj-typography-body-sm oj-text-color-secondary">\n                                        <oj-bind-text value="[[item.data.serviceActivityReturned]]"></oj-bind-text>\n                                    </div>\n                                </div>\n                                <div class="oj-flex-item oj-sm-flex-initial dashboard-min-width">\n                                    <span class="oj-text-md oj-text-color-secondary">\n                                        <oj-bind-text value="[[item.data.measuredQuantity]]"></oj-bind-text>\n                                    </span>\n                                </div>\n                                <div class="delete-button-spacing">\n                                    <oj-button aria-label="delete" chroming="borderless" :id="[[item.data.id + \',returnParts\']]" on-oj-action="[[ openDialog.bind($data, \'returnParts\') ]]" display="icons">\n                                        <span slot="startIcon" class="delete-image"></span>\n                                    </oj-button>\n                                </div>\n                            </div>\n                        </oj-list-item-layout>\n                    </template>\n                </oj-list-view>\n            </div>\n        </div>\n        <div class="button-style-flex">\n            <div class = "dashboard-actions oj-flex oj-sm-12 oj-md-12 flex-no-wrap">\n                <oj-button class="padding-all-16x" chroming="outlined" on-click=\'[[onSaveButtonClick.bind($data)]]\'>Save Draft</oj-button>\n                <oj-button chroming="callToAction"\n                    on-click=\'[[onPreviewInvoiceButtonClick.bind($data)]]\'>Sign and Save</oj-button>\n            </div>\n        </div>\n    </div>\n</div>\n\n\n';});


define('text!views/invoice.html',[],function () { return '<!--\nOracle Field Service Debriefing plugin\n\nCopyright (c) 2023, Oracle and/or its affiliates.\nLicensed under the Universal Permissive License v 1.0 as shown at https://oss.oracle.com/licenses/upl/\n-->\n\n<div class="oj-flex oj-flex-items-pad oj-md-padding-4x-vertical oj-padding-top plugin-main-container invoice">\n    <div class="oj-sm-12 oj-md-8 oj-flex-item oj-sm-padding-2x-horizontal">\n        <div class="invoice-container " id="previewForm">\n            <div class="upper_invoice_block oj-flex">\n                <div class="oj-flex-item">\n                    <div class="oj-flex">\n                        <div class="invoice-header" data-bind="visible: isEmptyLogo()">\n                            <div class="invoice-header-logo"><img :src="[[logoUrl]]" alt="logo"/></div>\n                        </div>\n                        <div class="invoice-header" data-bind="visible: !isEmptyLogo()">\n                            <div class="invoice-header-logo-default">\n                                <div class="invoice-header-logo"></div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div class="invoice-title">Time and Labor Report</div>\n\n            <div class="invoice_block">\n                <div class="participants-block oj-flex flex-no-wrap">\n                    <div class="oj-flex-item report-customer-address">\n                            <div class="oj-flex-item report-title-left">Customer</div>\n                            <div class="oj-flex-item report-value">\n                                <div data-bind="text: customer.name"></div>\n                                <div data-bind="text: stateCityText()"></div>\n                                <div data-bind="text: customer.address"></div>\n                                <div data-bind="text: customer.zip"></div>\n                            </div>\n                    </div>\n                    <div class="oj-flex-item report-technician-address">\n                            <div class="oj-flex-item report-title-right">Technician</div>\n                            <div class="oj-flex-item">\n                                <div data-bind="text: resource.name"></div>\n                            </div>\n                    </div>\n                </div>\n            </div>\n\n            <div class="invoice_block " data-bind="visible: laborItems().length > 0">\n                <div class="oj-flex-item">\n                    <div class="report-title-main">Time Spent</div>\n                </div>\n\n                <div class="oj-flex-item line_after" data-bind="foreach: laborItems">\n                    <div class="oj-margin-vertical report-value-main">\n                        <div class="oj-flex flex-no-wrap align-center">\n                            <div class="oj-flex-item" data-bind="text: item_text"></div>\n                            <div class="oj-flex">\n                                <div  data-bind="text: $parent.formatDuration($data)"></div>\n                            </div>\n                        </div>\n\n                        <div data-bind="text: item_label"></div>\n                        <div class="oj-flex">\n                            <span data-bind="text: $parent.formatTime(startTime)"></span>\n                            <span>&nbsp;-&nbsp;</span>\n                            <span data-bind="text: $parent.formatTime(endTime)"></span>\n                        </div>\n                    </div>\n                </div>\n\n                <div class="oj-flex flex-reverse">\n                    <div class="total-text">\n                        <span>Total:</span>\n                        <span data-bind="text: laborsTotalHours"></span>\n                        <span data-bind="text: totalHoursText"></span>\n                    </div>\n                </div>\n            </div>\n\n            <div class="invoice_block " data-bind="visible: expenseItems().length > 0">\n                <div class="oj-flex-item">\n                    <div class="report-title-main">Expenses</div>\n                </div>\n                <div class="oj-flex-item oj-margin-vertical line_after" data-bind="foreach: expenseItems">\n                    <div class="oj-margin-vertical report-value-main">\n                        <div class="oj-flex flex-no-wrap align-center">\n                            <div class="oj-flex-item" data-bind="text: item_text"></div>\n                            <div class="oj-flex">\n                                <span data-bind="text: currency_sign"></span>\n                                <span data-bind="text: amount"></span>\n                            </div>\n                        </div>\n\n                        <div data-bind="text: item_label"></div>\n                    </div>\n                </div>\n\n                <div class="oj-flex-item">\n                    <div class="oj-flex flex-reverse">\n                        <div class="total-text">\n                            <span>Total:</span>\n                            <span data-bind="text: currencySign"></span>\n                            <span data-bind="text: totalExpensesAmount"></span>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div class="invoice_block line_after" data-bind="visible: usedPartsList.length > 0">\n                <div class="oj-flex-item">\n                    <div class="report-title-main">Parts Added</div>\n                </div>\n\n                <!-- ko foreach: usedPartsList -->\n                <div class="oj-flex-item oj-margin-vertical  report-value-main">\n                    <div class="oj-flex align-center">\n                        <div class="oj-flex-item">\n                            <span data-bind="text: inventory.get(\'part_item_number_rev\')"></span>\n                        </div>\n                        <div class="oj-flex">\n                            <div>\n                                <span data-bind="text: measuredQuantity"></span>\n                            </div>\n                        </div>\n                    </div>\n                    <div>\n                        <span data-bind="text: inventory.get(\'invsn\')"></span>\n                    </div>\n                    <div>\n                        <div data-bind="text: inventory.get(\'part_item_desc\')"></div>\n                    </div>\n                </div>\n                <!-- /ko -->\n\n            </div>\n\n            <div class="invoice_block line_after" data-bind="visible: returnedPartsList.length > 0">\n                <div class="oj-flex-item">\n                    <div class="report-title-main">Parts Returned</div>\n                </div>\n\n                <!-- ko foreach: returnedPartsList -->\n                <div class="oj-flex-item oj-margin-vertical report-value-main ">\n                    <div class="oj-flex align-center">\n                        <div class="oj-flex-item">\n                            <span data-bind="text: inventory.get(\'part_item_number_rev\')"></span>\n                        </div>\n                        <div class="oj-flex">\n                            <span data-bind="text: measuredQuantity"></span>\n                        </div>\n                    </div>\n                    <div class="oj-flex">\n                        <span data-bind="text: inventory.get(\'invsn\')"></span>\n                    </div>\n                    <div class="oj-flex flex-no-wrap">\n                        <div data-bind="text: inventory.get(\'part_item_desc\')"></div>\n                    </div>\n                </div>\n                <!-- /ko -->\n\n            </div>\n\n            <!--Signature -->\n            <div class="signature_block oj-flex oj-sm-justify-content-center">\n                <div class="oj-flex-item oj-sm-flex-initial">\n                    <div class="invoice-signature-block" >\n                        <div class="report-title-left">Customer Signature</div>\n                        <div class="report-value-main" data-bind="text: currentDate()"></div>\n                    </div>\n                    <canvas id="canvas_invoice" class="canvas-invoice"></canvas>\n                    <div class="oj-flex-item oj-helper-text-align-start button_clear_canvas oj-helper-text-align-end">\n                        <oj-button id="button_clear_canvas"\n                                   key="key_clear_canvas"\n                                   data-oj-binding-provider="none">Clear</oj-button>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <!-- Print Form -->\n        <div style="position: absolute; left: -10000px;">\n            <div class="invoice-container" id="printableForm">\n                <div class="upper_invoice_block oj-flex">\n                    <div class="oj-flex-item">\n                        <div class="oj-flex">\n                            <div class="invoice-header" data-bind="visible: isEmptyLogo()">\n                                <div class="invoice-header-logo"><img :src="[[logoUrl]]" alt="logo"/></div>\n                            </div>\n                            <div class="invoice-header" data-bind="visible: !isEmptyLogo()">\n                                <div class="invoice-header-logo-default">\n                                    <div class="invoice-header-logo"></div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n\n                <div class="invoice-title">Time and Labor Report</div>\n                <div class="invoice_block">\n                    <div class="participants-block oj-flex">\n                        <div class="oj-flex-item report-customer-address">\n                            <div>\n                                <div class="oj-flex-item report-title-left">Customer</div>\n                                <div class="oj-flex-item report-value">\n                                    <div class="name-value" data-bind="text: customer.name"></div>\n                                    <div data-bind="text: stateCityText()"></div>\n                                    <div data-bind="text: customer.address"></div>\n                                    <div data-bind="text: customer.zip"></div>\n                                </div>\n                            </div>\n                        </div>\n                        <div class="oj-flex-item report-technician-address">\n                            <div>\n                                <div class="oj-flex-item report-title-right">Technician</div>\n                                <div class="oj-flex-item">\n                                    <span class="name-value" data-bind="text: resource.name"></span>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n\n                <div class="invoice_block" data-bind="visible: laborItems().length > 0">\n                    <div class="oj-flex-item">\n                        <div class="report-title-main">Time Spent</div>\n                    </div>\n\n                    <div class="oj-flex-item line_after" data-bind="foreach: laborItems">\n                        <div class="oj-margin-vertical report-value-main">\n                            <div class="oj-flex align-center">\n                                <div class="oj-flex-item" data-bind="text: item_text"></div>\n                                <div class="oj-flex">\n                                    <div data-bind="text: $parent.formatDuration($data)"></div>\n                                </div>\n                            </div>\n\n                            <div data-bind="text: item_label"></div>\n                            <div class="oj-flex">\n                                <span data-bind="text: $parent.formatTime(startTime)"></span>\n                                <span>&nbsp;-&nbsp;</span>\n                                <span data-bind="text: $parent.formatTime(endTime)"></span>\n                            </div>\n                        </div>\n                    </div>\n\n                    <div class="oj-flex flex-reverse">\n                        <div class="total-text">\n                            <span>Total:</span>\n                            <span data-bind="text: laborsTotalHours"></span>\n                            <span data-bind="text: totalHoursText"></span>\n                        </div>\n                    </div>\n                </div>\n\n                <div class="invoice_block" data-bind="visible: expenseItems().length > 0">\n                    <div class="oj-flex-item">\n                        <div class="report-title-main">Expenses</div>\n                    </div>\n                    <div class="oj-flex-item oj-margin-vertical line_after" data-bind="foreach: expenseItems">\n                        <div class="oj-margin-vertical report-value-main">\n                            <div class="oj-flex align-center">\n                                <div class="oj-flex-item " data-bind="text: item_text"></div>\n                                <div class="oj-flex">\n                                    <span data-bind="text: currency_sign"></span>\n                                    <span data-bind="text: amount"></span>\n                                </div>\n                            </div>\n\n                            <div data-bind="text: item_label"></div>\n                        </div>\n                    </div>\n\n                    <div class="oj-flex-item">\n                        <div class="oj-flex flex-reverse">\n                            <div class="total-text">\n                                <span>Total:</span>\n                                <span data-bind="text: currencySign"></span>\n                                <span data-bind="text: totalExpensesAmount"></span>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n\n                <div class="invoice_block line_after" data-bind="visible: usedPartsList.length > 0">\n                    <div class="oj-flex-item">\n                        <div class="report-title-main">Parts Added</div>\n                    </div>\n\n                    <!-- ko foreach: usedPartsList -->\n                    <div class="oj-flex-item oj-margin-vertical  report-value-main">\n                        <div class="oj-flex align-center">\n                            <div class="oj-flex-item">\n                                <span data-bind="text: inventory.get(\'part_item_number_rev\')"></span>\n                            </div>\n                            <div class="oj-flex">\n                                <div>\n                                    <span data-bind="text: measuredQuantity"></span>\n                                </div>\n                            </div>\n                        </div>\n                        <div>\n                            <div data-bind="text: inventory.get(\'invsn\')"></div>\n                        </div>\n                        <div>\n                            <div data-bind="text: inventory.get(\'part_item_desc\')"></div>\n                        </div>\n                    </div>\n                    <!-- /ko -->\n\n                </div>\n\n                <div class="invoice_block line_after" data-bind="visible: returnedPartsList.length > 0">\n                    <div class="oj-flex-item">\n                        <div class="report-title-main">Parts Returned</div>\n                    </div>\n\n                    <!-- ko foreach: returnedPartsList -->\n                    <div class="oj-flex-item oj-margin-vertical report-value-main ">\n                        <div class="oj-flex align-center">\n                            <div class="oj-flex-item ">\n                                <span data-bind="text: inventory.get(\'part_item_number_rev\')"></span>\n                            </div>\n                            <div class="oj-flex">\n                                <span data-bind="text: measuredQuantity"></span>\n                            </div>\n                        </div>\n                        <div class="oj-flex">\n                            <div data-bind="text: inventory.get(\'invsn\')"></div>\n                        </div>\n                        <div class="oj-flex">\n                            <div data-bind="text: inventory.get(\'part_item_desc\')"></div>\n                        </div>\n                    </div>\n                    <!-- /ko -->\n\n                </div>\n\n                <!--Signature -->\n\n                <div class="signature_block oj-flex oj-sm-justify-content-center" style="padding-top: 32px">\n                    <div class="oj-flex-item oj-sm-flex-initial">\n                        <div class="invoice-signature-block">\n                            <div class="report-title-left">Customer Signature</div>\n                            <div data-bind="text: currentDate()"></div>\n                            <canvas id="printableSignatureCanvas" class="canvas-invoice" style="width: 450px; height: 300px;"></canvas>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n\n    </div>\n</div>\n\n<div>\n    <div class="invoice-buttons oj-flex oj-sm-12 oj-md-12">\n        <div class="padding-of-buttons">\n            <oj-button on-click=\'[[onCloseButtonClick.bind($data)]]\'\n                       data-oj-binding-provider="none">Cancel</oj-button>\n        </div>\n        <div  class="padding-of-buttons">\n            <oj-button chroming="callToAction" class="oj-button-primary"\n                       on-click="[[onSubmitButtonClick.bind($data)]]"\n                       data-oj-binding-provider="none">Submit</oj-button>\n        </div>\n    </div>\n</div>\n';});

define('appController',["ojs/ojcore","knockout","./ofsc-connector","./services/inventory-search-service","./data-services/parts-catalog-data-service","./models/catalog-collection","text!required-properties.json","ojs/ojmodel","./errors/application-critical-error","./components/index","ojs/ojrouter","ojs/ojvalidation-datetime","viewModels/add-expense","viewModels/add-labor","viewModels/add-returned-part","viewModels/add-used-part","viewModels/dashboard","viewModels/invoice","viewModels/service-checklist","text!views/service-checklist.html","text!views/add-expense.html","text!views/add-labor.html","text!views/add-returned-part.html","text!views/add-used-part.html","text!views/dashboard.html","text!views/invoice.html"],function(e,t,i,n,r,s,o,a,l){const d="inventory",c="part",v="part_sn",u="labor",p="expense",h="delete";function m(e){return{entity:d,action:h,invid:e.recordId}}return class{constructor(){this.router=this.getRouterInstance(),this.router.configure({dashboard:{label:"Dashboard",isDefault:!0},"add-labor":{label:"Add Labor"},"add-expense":{label:"Add Expense"},"add-used-part":{label:"Add Used Part"},"add-returned-part":{label:"Add Returned Part"},"service-checklist":{label:"Service Checklist"},invoice:{label:"Invoice"}}),e.Router.defaults.urlAdapter=new e.Router.urlParamAdapter,this.router.moduleConfig.params.app=this,this.dateTimeConverter=e.Validation.converterFactory("datetime").createConverter(),this.openData=t.observable(""),this._initModels(),this.dialogHeading=t.observable(""),this.dialogMessage=t.observable(""),this.ofscConnector=new i,this.ofscConnector.debugMessageReceivedSignal.add(e=>{console.info("-> DEBRIEFING: ",e)}),this.ofscConnector.debugMessageSentSignal.add(e=>{console.info("<- DEBRIEFING: ",e)}),this.ofscConnector.debugIncorrectMessageReceivedSignal.add((e,t)=>{console.error("-> DEBRIEFING: incorrect message: ",e,t)})}getRouterInstance(){return e.Router.rootInstance}getInvTypePartConst(){return c}getInvTypePartSnConst(){return v}getLogoUrl(){return this.logoUrl}terminatePlugin(){this.ofscConnector.sendMessage({method:"close"}).then(e=>{console.log("RESPONSE DATA: ",e)}).catch(e=>{console.error(e)})}load(){return new Promise((e,t)=>{console.log("Load is being called"),this.ofscConnector.sendMessage({method:"ready",sendInitData:!0}).then(t=>{switch(t.method){case"init":let i=t.attributeDescription;window.localStorage.setItem("debriefing_attributeDescription",JSON.stringify(i)),this.ofscConnector.sendMessage({method:"initEnd"});break;case"open":console.log("Message in case open"+t),this.openData(t),this.attributeDescription=JSON.parse(window.localStorage.getItem("debriefing_attributeDescription"));let n=this._verifyProperties(o,this.attributeDescription);if(""!==n)throw new l("Critical Error",n);if("started"!==t.activity.astatus)throw new l("Critical Error","The queue must be activated and the activity must be started. The plugin will be terminated.");if("activity"!==t.entity)throw new l("Critical Error","The plugin should be opened from an activity page. The plugin will be terminated.");this.loadData().then(()=>{this.open()}).then(e);break;case"error":this._showErrorAlert(t)}}).catch(e=>{if(e instanceof l)return t(e);console.error("Unable to start application: ",e)})})}loadData(){return console.log("LoadData is being called"),this.partsCatalogDataService=new r(this.ofscConnector),this.catalogCollection=new s,this.partsCatalogDataService.getPartsCatalogsStructure().then(e=>{e.forEach(e=>{this.catalogCollection.add(e)})})}_initModels(){this.laborItems=t.observableArray([]),this.expenseItems=t.observableArray([]),this.serialNums=t.observableArray([]),this.logoUrl=t.observable(""),this.partModelConstructor=e.Model.extend({idAttribute:"part_item_number"}),this.resourcePartsCollection=new a.Collection(null,{model:this.partModelConstructor}),this.createdDeinstalledPartsCollection=new a.Collection(null,{model:this.partModelConstructor}),this.customerPartsCollection=new a.Collection(null,{model:this.partModelConstructor}),this.usedPartsCollection=new a.Collection(null,{model:this.partModelConstructor}),this.returnedPartsCollection=new a.Collection(null,{model:this.partModelConstructor}),this.partsInventoryActionsCollection=new a.Collection}open(){console.log("Open is being called");let t=[];Object.entries(this.attributeDescription.labor_service_activity.enum).forEach(([e,{text:i,inactive:n}])=>{n||t.push({id:e,text:i})}),this.laborActivityEnumCollection=new a.Collection(t);let i=[];Object.entries(this.attributeDescription.labor_item_number.enum).forEach(([e,{text:t,inactive:n}])=>{n||i.push({id:e,label:t,text:this.attributeDescription.labor_item_desc.enum[e]?this.attributeDescription.labor_item_desc.enum[e].text:""})}),this.laborItemEnumCollection=new a.Collection(i);let r=[];Object.entries(this.attributeDescription.expense_service_activity.enum).forEach(([e,{text:t,inactive:i}])=>{i||r.push({id:e,text:t})}),this.expenseActivityEnumCollection=new a.Collection(r);let s=[];Object.entries(this.attributeDescription.expense_item_number.enum).forEach(([e,{text:t,inactive:i}])=>{i||s.push({id:e,label:t,text:this.attributeDescription.expense_item_desc.enum[e]?this.attributeDescription.expense_item_desc.enum[e].text:""})}),this.expenseItemEnumCollection=new a.Collection(s);let o=[];Object.entries(this.attributeDescription.expense_currency_code.enum).forEach(([e,{text:t,inactive:i}])=>{if(i)return;let n=t.match(/^(.+?)\|(.+)/);o.push({id:e,sign:n[1],text:n[2]})}),this.expenseCurrencyEnumCollection=new a.Collection(o);let l=[];Object.entries(this.attributeDescription.part_service_activity_used.enum).forEach(([e,{text:t,inactive:i}])=>{i||l.push({id:e,text:t})}),this.partActivityUsedEnumCollection=new a.Collection(l);let d=[];Object.entries(this.attributeDescription.part_service_activity_returned.enum).forEach(([e,{text:t,inactive:i}])=>{i||d.push({id:e,text:t})}),this.partActivityReturnedEnumCollection=new a.Collection(d);let h=this.openData().resource;this.resource=new e.Model({id:h.pid||"",name:h.pname||""});let m=this.openData().activity;this.customer=new e.Model({name:m.cname||"",address:m.caddress||"",city:m.ccity||"",state:m.cstate||"",zip:m.czip||"",workorder:m.appt_number||"",company:m.ccompany||""}),this.ofscActivityModel=new(e.Model.extend({idAttribute:"aid"}))({aid:m.aid});let _=this.openData().inventoryList;this.installedInventoriesSummary={},this.deinstalledInventoriesSummary={},Object.entries(_).forEach(([e,t])=>{if(!m.aid||!t.inv_aid||m.aid===String(t.inv_aid))if(c===t.invtype||v===t.invtype){let i=t.invpool;switch(t.part_item_number=t.part_item_number_rev+"~"+t.invsn,null===t.quantity&&(t.quantity=0),i){case"provider":this.resourcePartsCollection.add(t);break;case"customer":this.customerPartsCollection.add(t);break;case"install":let n=t.part_item_number_rev;""!==t.invsn&&(n=n+"~"+t.invsn),this.installedInventoriesSummary[n]={invid:t.invid,model:t.part_item_number_rev,quantity_delta:0,invsn:t.invsn},this.usedPartsCollection.add(t);break;case"deinstall":let r=t.part_item_number_rev;""!==t.invsn&&(r=r+"~"+t.invsn),this.deinstalledInventoriesSummary[r]={invid:t.invid,model:t.part_item_number_rev,quantity_delta:0,invsn:t.invsn},this.returnedPartsCollection.add(t);break;default:throw new Error(`Unknown inventory pool: '${i}' (invid = '${e}')`)}}else u===t.invtype?this.addLabor({activityId:t.labor_service_activity,itemId:t.labor_item_number,startTime:t.labor_start_time,endTime:t.labor_end_time,recordId:e}):p===t.invtype&&this.addExpense({activityId:t.expense_service_activity,itemId:t.expense_item_number,amount:t.expense_amount,currencyKey:t.expense_currency_code,recordId:e})}),null!=this.openData().securedData&&this.logoUrl(this.openData().securedData.logoUrl),this.timeConverter=new e.IntlDateTimeConverter({pattern:"hh:mm a"}),this.inventorySearchService=new n(this.resourcePartsCollection,this.attributeDescription,["part_item_number_rev","part_item_desc","invsn"],"part_item_number_rev")}getIdFromArray(e){let t=0;return 0===e.length?t=1:(e.forEach(e=>{t=t<=e.id?e.id:t}),t++),t}addLabor({activityId:e,itemId:t,startTime:i,endTime:n,recordId:r=null}){let s={id:this.getIdFromArray(this.laborItems()),activityId:e,itemId:t,startTime:i,endTime:n};r&&(s.recordId=r),Object.entries(this.laborItemEnumCollection.get(t).toJSON()).forEach(([e,t])=>{s["item_"+e]=t}),Object.entries(this.laborActivityEnumCollection.get(e).toJSON()).forEach(([e,t])=>{s["activity_"+e]=t});let o=this.dateTimeConverter.compareISODates(this.dateTimeConverter.parse(n),this.dateTimeConverter.parse(i))/1e3/60;s.duration=o<0?+o+1440:o,this.laborItems.push(s)}removeLabor(e){const t=this.laborItems().findIndex(t=>t.id===e),i=this.laborItems.splice(t,1).filter(e=>!!e.recordId);i.length&&this.addInventoryListToDeleted(i)}addExpense({activityId:e,itemId:t,amount:i,currencyKey:n,recordId:r}){let s={id:this.getIdFromArray(this.expenseItems()),activityId:e,itemId:t,amount:i,currencyKey:n};r&&(s.recordId=r),Object.entries(this.expenseItemEnumCollection.get(t).toJSON()).forEach(([e,t])=>{s["item_"+e]=t}),Object.entries(this.expenseActivityEnumCollection.get(e).toJSON()).forEach(([e,t])=>{s["activity_"+e]=t}),Object.entries(this.expenseCurrencyEnumCollection.get(n).toJSON()).forEach(([e,t])=>{s["currency_"+e]=t}),this.expenseItems.push(s)}removeExpense(e){const t=this.expenseItems().findIndex(t=>t.id===e),i=this.expenseItems.splice(t,1).filter(e=>!!e.recordId);i.length&&this.addInventoryListToDeleted(i)}checkValidationGroup(){const e=document.getElementById("tracker");return"valid"===e.valid||(e.showMessages(),e.focusOn("@firstInvalidShown"),!1)}submitPluginData(){this.ofscConnector.sendMessage(this._getOfscCloseData()).then(e=>{console.log("RESPONSE DATA: ",e)}).catch(e=>{this._showErrorAlert(e),console.error(e)})}addUsedPart(e,t,i,n){let r=this.resourcePartsCollection.findWhere({part_item_number_rev:e,invsn:n}),s="";if(s=n?e+"~"+n:e,!r)return!1;let o=this.usedPartsCollection.findWhere({part_item_number_rev:e,invsn:n});if(!o){let e=r.toJSON();delete e.invid,e.quantity=0,e.invpool="install",e.invsn=n,o=new this.partModelConstructor(e),this.usedPartsCollection.add(o)}r.set("quantity",(parseInt(r.get("quantity"),10)||0)-i),o.set("quantity",(parseInt(o.get("quantity"),10)||0)+i),o.set("part_service_activity_used",t);let a=this.installedInventoriesSummary[s];a||(a=this.installedInventoriesSummary[s]={invid:null,model:e,activityId:t,quantity_delta:0,serialNum:n}),a.quantity_delta+=i}removeUsedPart(e,t){let i=this.resourcePartsCollection.findWhere({part_item_number_rev:e,invsn:t}),n=this.usedPartsCollection.findWhere({part_item_number_rev:e,invsn:t});if(!n)return!1;let r=parseInt(n.get("quantity"),10)||0;if(!i){let e=n.toJSON();delete e.invid,e.quantity=0,e.invpool="provider",i=new this.partModelConstructor(e),this.resourcePartsCollection.add(i)}i.set("quantity",(parseInt(i.get("quantity"),10)||0)+r),n.set("quantity",(parseInt(n.get("quantity"),10)||0)-r);let s=this.installedInventoriesSummary[e];s||(s=this.installedInventoriesSummary[e]={invid:n.get("invid"),model:e,quantity_delta:0}),s.quantity_delta-=r}addReturnedPart(e,t,i,n){let r=e.get("part_item_number_rev"),s=this.customerPartsCollection.findWhere({part_item_number_rev:r,invsn:n}),o=this.returnedPartsCollection.findWhere({part_item_number_rev:r,invsn:n});if(n&&(r=r+"~"+n),!o){let t=e.toJSON();delete t.invid,t.quantity=0,t.invpool="deinstall",t.invsn=n,(o=new this.partModelConstructor(t)).set("part_item_number",r),this.returnedPartsCollection.add(o)}if(s)s.set("quantity",(parseInt(s.get("quantity"),10)||0)-i);else{let t=this.createdDeinstalledPartsCollection.findWhere({part_item_number_rev:e.get("part_item_number_rev"),invsn:n});t?t.set("quantity",(parseInt(t.get("quantity"),10)||0)+i):(e.set("quantity",parseInt(i,10)||0),e.set("part_item_number",r),this.createdDeinstalledPartsCollection.add(e))}o.set("quantity",(parseInt(o.get("quantity"),10)||0)+i),o.set("part_service_activity_returned",t);let a=this.deinstalledInventoriesSummary[r];a||(a=this.deinstalledInventoriesSummary[r]={invid:null,model:e.get("part_item_number_rev"),activityId:t,quantity_delta:0,invsn:n}),a.quantity_delta+=i}removeReturnedPart(e,t){let i=e,n=this.customerPartsCollection.findWhere({part_item_number_rev:e,invsn:t}),r=this.returnedPartsCollection.findWhere({part_item_number_rev:e,invsn:t});if(!r)return!1;let s=parseInt(r.get("quantity"),10)||0;if(!n){let e=r.toJSON();delete e.invid,e.quantity=0,e.invpool="customer",e.invsn=t,n=new this.partModelConstructor(e),this.customerPartsCollection.add(n)}n.set("quantity",(parseInt(n.get("quantity"),10)||0)+s),r.set("quantity",(parseInt(r.get("quantity"),10)||0)-s),t&&(i=i+"~"+t);let o=this.deinstalledInventoriesSummary[i];o||(o=this.deinstalledInventoriesSummary[i]={invid:r.get("invid"),model:e,quantity_delta:0,invsn:t}),o.quantity_delta-=s}_addInstallInventoryAction({invid:e,inv_aid:t,invsn:i,quantity:n,properties:r}){this.partsInventoryActionsCollection.add({action:"install",invid:e,inv_aid:t,invsn:i,quantity:n,properties:r||{}})}_addDeinstallInventoryAction({invid:e,inv_pid:t,quantity:i,properties:n}){this.partsInventoryActionsCollection.add({action:"deinstall",invid:e,inv_pid:t,quantity:i,properties:n||{}})}_createDeinstallInventoryAction(e,t={}){let i=e.toJSON();i.part_item_number.split("~")[0],delete i.invid,delete i.inv_aid,delete i.inv_pid,delete i.quantity,delete i.invpool,delete i.invtype,delete i.invsn,e.get("invtype")===v?this.partsInventoryActionsCollection.add({action:"create",entity:"inventory",inv_aid:e.get("inv_aid"),inv_pid:e.get("inv_pid"),invtype:e.get("invtype"),invpool:e.get("invpool"),properties:Object.assign(i||{},t)}):this.partsInventoryActionsCollection.add({action:"create",entity:"inventory",inv_aid:e.get("inv_aid"),inv_pid:e.get("inv_pid"),invtype:e.get("invtype"),quantity:e.get("quantity"),invpool:e.get("invpool"),properties:Object.assign(i||{},t)})}_addUndoInstallInventoryAction({invid:e,quantity:t,invsn:i,properties:n}){this.partsInventoryActionsCollection.add({action:"undo_install",invid:e,quantity:t,invsn:i,properties:n||{}})}_addUndoDeinstallInventoryAction({invid:e,quantity:t,properties:i}){this.partsInventoryActionsCollection.add({action:"undo_deinstall",invid:e,quantity:t,properties:i||{}})}_generatePartsActions(){Object.entries(this.installedInventoriesSummary).forEach(([e,t])=>{let i=null;if(-1!==e.indexOf("~")){let t=[];e=(t=e.split("~"))[0],i=t[1]}if(t.quantity_delta>0){let n=this.resourcePartsCollection.findWhere({part_item_number_rev:e,invsn:i});if(!n||!n.get("invid"))return void console.error("Unable to locate resource part, part_item_number_rev = "+e);v===n.get("invtype")?this._addInstallInventoryAction({invid:n.get("invid"),inv_aid:this.ofscActivityModel.get("aid"),properties:{part_service_activity_used:t.activityId,invsn:t.serialNum}}):this._addInstallInventoryAction({invid:n.get("invid"),inv_aid:this.ofscActivityModel.get("aid"),quantity:t.quantity_delta,properties:{part_service_activity_used:t.activityId}})}else if(t.quantity_delta<0){let i=this.usedPartsCollection.findWhere({part_item_number_rev:e});if(!i||!i.get("invid"))return void console.error("Unable to undo install of inventory, part_item_number_rev = "+e);v===i.get("invtype")?this._addUndoInstallInventoryAction({invid:t.invid,invsn:t.serialNum}):this._addUndoInstallInventoryAction({invid:i.get("invid"),quantity:Math.abs(t.quantity_delta),invsn:t.serialNum})}}),Object.entries(this.deinstalledInventoriesSummary).forEach(([e,t])=>{let i=null;if(-1!==e.indexOf("~")){let t=[];e=(t=e.split("~"))[0],i=t[1]}if(t.quantity_delta>0){let n=this.customerPartsCollection.findWhere({part_item_number_rev:e,invsn:i}),r=!1,s={part_service_activity_returned:t.activityId,invsn:t.invsn};if(n&&n.get("invid"))r=!0;else{let n=this.createdDeinstalledPartsCollection.findWhere({part_item_number_rev:e,invsn:i});n?(t.invsn&&n.set("invtype",v),this._createDeinstallInventoryAction(n,s)):console.error("Unable to locate customer part, part_item_number_rev = "+e)}r&&(n.get("invtype")===v?this._addDeinstallInventoryAction({invid:n.get("invid"),inv_pid:this.resource.GetId(),properties:s}):this._addDeinstallInventoryAction({invid:n.get("invid"),inv_pid:this.resource.GetId(),quantity:t.quantity_delta,properties:s}))}else if(t.quantity_delta<0){let n=this.returnedPartsCollection.findWhere({part_item_number_rev:e,invsn:i});if(!n||!n.get("invid"))return void console.error("Unable to undo deinstall of inventory, part_item_number_rev = "+e);n.get("invtype")===v?this._addUndoDeinstallInventoryAction({invid:n.get("invid")}):this._addUndoDeinstallInventoryAction({invid:n.get("invid"),quantity:Math.abs(t.quantity_delta)})}})}_getOfscCloseData(){return this._generatePartsActions(),{method:"close",activity:this.ofscActivityModel.toJSON(),inventoryList:this._getOfscInventoryListUpdates(),actions:[].concat(this._getOfscPartsInventoryActions(),this._getOfscCreateLaborInventoryActions(),this._getOfscCreateExpenseInventoryActions(),this._getOfscDeleteInventoryActions())}}_getOfscInventoryListUpdates(){let e={};return this.partsInventoryActionsCollection.where({action:"update"}).forEach(t=>{e[t.get("invid")]=Object.assign({invid:t.get("invid"),invtype:t.get("invtype"),inv_aid:t.get("inv_aid"),inv_pid:t.get("inv_pid"),quantity:t.get("quantity")},t.properties)}),e}_getOfscPartsInventoryActions(){return this.partsInventoryActionsCollection.filter(e=>"update"!==e.get("action")).map(e=>Object.assign({entity:"inventory"},e.toJSON()))}_getOfscCreateLaborInventoryActions(){return this.laborItems().filter(e=>!e.recordId).map(e=>({entity:"inventory",action:"create",invpool:"install",invtype:u,inv_aid:this.ofscActivityModel.GetId(),inv_pid:this.resource.GetId(),properties:{labor_service_activity:e.activityId,labor_item_number:e.itemId,labor_item_desc:e.itemId,labor_start_time:e.startTime,labor_end_time:e.endTime}}))}_getOfscCreateExpenseInventoryActions(){return this.expenseItems().filter(e=>!e.recordId).map(e=>({entity:"inventory",action:"create",invpool:"install",invtype:p,inv_aid:this.ofscActivityModel.GetId(),inv_pid:this.resource.GetId(),properties:{expense_service_activity:e.activityId,expense_item_number:e.itemId,expense_item_desc:e.itemId,expense_amount:""+e.amount,expense_currency_code:e.currencyKey}}))}_getOfscDeleteInventoryActions(){const e=this.getDeletedInventoryList();return e.length?e.map(m):[]}_verifyProperties(e,t){let i=JSON.parse(e).properties,n=[];return Object.values(i).forEach(e=>{t[e.label]||n.push(e.label)}),n.length?1===n.length?"The following property must be configured: "+n[0]+".":"The following properties must be configured: "+n.join(", ")+".":""}_showErrorAlert(e){let t=e.errors.map(e=>{switch(e.code){case"CODE_ACTION_INVENTORY_ACTIVITY_STATUS_INVALID":return"The activity must be started";case"CODE_ACTION_ON_PAST_DATE_NOT_ALLOWED":return"The activity shouldn't be in the past";default:return e}});0!==t.length&&(1===(t=t.filter((e,t,i)=>i.findIndex(t=>["code"].every(i=>t[i]===e[i]))===t)).length&&"string"==typeof t[0]?this.errorAlertPopup("Critical Error",t.join(),""):this.errorAlertPopup("Critical Error",JSON.stringify(t,null,4),""))}errorAlertPopup(e,t){return this.resolveAlertCallback=null,this.dialogHeading(e),this.dialogMessage(t),document.getElementById("alertDialog").open(),new Promise((e,t)=>{this.resolveAlertCallback=e})}closeDialog(e){document.getElementById("alertDialog").close(),this.resolveAlertCallback instanceof Function&&this.resolveAlertCallback()}addInventoryListToDeleted(e){const t=this.getDeletedInventoryList();t.length?this.setDeleteInventoryList(t.concat(e)):this.setDeleteInventoryList(e)}setDeleteInventoryList(e){this.deleteInventoryList=e}getDeletedInventoryList(){return this.deleteInventoryList||[]}}});
requirejs.config({baseUrl:"js",paths:{knockout:"https://static.oracle.com/cdn/jet/11.0.0/3rdparty/knockout/knockout-3.5.1",jquery:"https://static.oracle.com/cdn/jet/11.0.0/3rdparty/jquery/jquery-3.6.0.min","jqueryui-amd":"https://static.oracle.com/cdn/jet/11.0.0/3rdparty/jquery/jqueryui-amd-1.12.1.min",promise:"https://static.oracle.com/cdn/jet/11.0.0/3rdparty/es6-promise/es6-promise.min",hammerjs:"https://static.oracle.com/cdn/jet/11.0.0/3rdparty/hammer/hammer-2.0.8.min",ojdnd:"https://static.oracle.com/cdn/jet/11.0.0/3rdparty/dnd-polyfill/dnd-polyfill-1.0.2.min",ojs:"https://static.oracle.com/cdn/jet/11.0.0/default/js/min",ojL10n:"https://static.oracle.com/cdn/jet/11.0.0/default/js/ojL10n",ojtranslations:"https://static.oracle.com/cdn/jet/11.0.0/default/js/resources",persist:"https://static.oracle.com/cdn/jet/11.0.0/3rdparty/persist/min",text:"libs/require/text",signals:"https://static.oracle.com/cdn/jet/11.0.0/3rdparty/js-signals/signals.min",touchr:"https://static.oracle.com/cdn/jet/11.0.0/3rdparty/touchr/touchr",preact:"https://static.oracle.com/cdn/jet/11.0.0/3rdparty/preact/dist/preact.umd","preact/hooks":"https://static.oracle.com/cdn/jet/11.0.0/3rdparty/preact/hooks/dist/hooks.umd","preact/debug":"https://static.oracle.com/cdn/jet/11.0.0/3rdparty/preact/debug/dist/debug.umd","preact/devtools":"https://static.oracle.com/cdn/jet/11.0.0/3rdparty/preact/devtools/dist/devtools.umd",proj4:"https://static.oracle.com/cdn/jet/11.0.0/3rdparty/proj4js/dist/proj4",css:"https://static.oracle.com/cdn/jet/11.0.0/3rdparty/require-css/css.min",ojcss:"https://static.oracle.com/cdn/jet/11.0.0/3rdparty/ojcss","css-builder":"libs/require-css/css-builder",normalize:"libs/require-css/normalize"},shim:{jquery:{exports:["jQuery","$"]}}}),require(["ojs/ojcore","knockout","appController","./errors/application-critical-error","ojs/ojcontext","ojs/ojknockout","ojs/ojmodule","ojs/ojrouter","ojs/ojnavigationlist","ojs/ojbutton","ojs/ojtoolbar"],function(t,e,o,r,s){$(function(){function s(){var s=new o;t.Router.sync().then(function(){s.load().then(()=>{e.applyBindings(s,document.getElementById("globalBody"))},o=>{if(o instanceof r){var c=document.getElementById("alertDialog");t.Context.getContext(c).getBusyContext().whenReady().then(function(){s.errorAlertPopup(o.heading,o.message).then(()=>{s.terminatePlugin()})}),e.applyBindings(s,document.getElementById("globalBody"))}console.error(o)})},function(e){t.Logger.error("Error in root start: "+e.message)})}$(document.body).hasClass("oj-hybrid")?document.addEventListener("deviceready",s):s()})});
define("main-temp", function(){});

